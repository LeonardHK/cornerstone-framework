!function(){function a(b){var c=a.resolve(b),d=a.modules[c];if(!d)throw new Error('failed to require "'+b+'"');return d.exports||(d.exports={},d.call(d.exports,d,d.exports,a.relative(c))),d.exports}a.modules={},a.resolve=function(b){var c=b,d=b+".js",e=b+"/index.js";return a.modules[d]&&d||a.modules[e]&&e||c},a.register=function(b,c){a.modules[b]=c},a.relative=function(b){return function(c){if("."!=c.charAt(0))return a(c);var d=b.split("/"),e=c.split("/");d.pop();for(var f=0;f<e.length;f++){var g=e[f];".."==g?d.pop():"."!=g&&d.push(g)}return a(d.join("/"))}},a.register("browser/debug.js",function(a){a.exports=function(){return function(){}}}),a.register("browser/diff.js",function(a){var b=function(){function a(a){return{newPos:a.newPos,components:a.components.slice(0)}}function b(a){for(var b=[],c=0;c<a.length;c++)a[c]&&b.push(a[c]);return b}function c(a){var b=a;return b=b.replace(/&/g,"&amp;"),b=b.replace(/</g,"&lt;"),b=b.replace(/>/g,"&gt;"),b=b.replace(/"/g,"&quot;")}var d=function(a){this.ignoreWhitespace=a};d.prototype={diff:function(b,c){if(c==b)return[{value:c}];if(!c)return[{value:b,removed:!0}];if(!b)return[{value:c,added:!0}];c=this.tokenize(c),b=this.tokenize(b);var d=c.length,e=b.length,f=d+e,g=[{newPos:-1,components:[]}],h=this.extractCommon(g[0],c,b,0);if(g[0].newPos+1>=d&&h+1>=e)return g[0].components;for(var i=1;f>=i;i++)for(var j=-1*i;i>=j;j+=2){var k,l=g[j-1],m=g[j+1];h=(m?m.newPos:0)-j,l&&(g[j-1]=void 0);var n=l&&l.newPos+1<d,o=m&&h>=0&&e>h;if(n||o){!n||o&&l.newPos<m.newPos?(k=a(m),this.pushComponent(k.components,b[h],void 0,!0)):(k=a(l),k.newPos++,this.pushComponent(k.components,c[k.newPos],!0,void 0));var h=this.extractCommon(k,c,b,j);if(k.newPos+1>=d&&h+1>=e)return k.components;g[j]=k}else g[j]=void 0}},pushComponent:function(a,b,c,d){var e=a[a.length-1];e&&e.added===c&&e.removed===d?a[a.length-1]={value:this.join(e.value,b),added:c,removed:d}:a.push({value:b,added:c,removed:d})},extractCommon:function(a,b,c,d){for(var e=b.length,f=c.length,g=a.newPos,h=g-d;e>g+1&&f>h+1&&this.equals(b[g+1],c[h+1]);)g++,h++,this.pushComponent(a.components,b[g],void 0,void 0);return a.newPos=g,h},equals:function(a,b){var c=/\S/;return!this.ignoreWhitespace||c.test(a)||c.test(b)?a==b:!0},join:function(a,b){return a+b},tokenize:function(a){return a}};var e=new d,f=new d(!0);f.tokenize=function(a){return b(a.split(/(\s+|\b)/))};var g=new d(!0);g.tokenize=function(a){return b(a.split(/([{}:;,]|\s+)/))};var h=new d;return h.tokenize=function(a){return a.split(/^/m)},{diffChars:function(a,b){return e.diff(a,b)},diffWords:function(a,b){return f.diff(a,b)},diffLines:function(a,b){return h.diff(a,b)},diffCss:function(a,b){return g.diff(a,b)},createPatch:function(a,b,c,d,e){function f(a){return a.map(function(a){return" "+a})}function g(a,b,c){var d=j[j.length-2],e=b===j.length-2,f=b===j.length-3&&(c.added===!d.added||c.removed===!d.removed);/\n$/.test(c.value)||!e&&!f||a.push("\\ No newline at end of file")}var i=[];i.push("Index: "+a),i.push("==================================================================="),i.push("--- "+a+("undefined"==typeof d?"":"	"+d)),i.push("+++ "+a+("undefined"==typeof e?"":"	"+e));var j=h.diff(b,c);j[j.length-1].value||j.pop(),j.push({value:"",lines:[]});for(var k=0,l=0,m=[],n=1,o=1,p=0;p<j.length;p++){var q=j[p],r=q.lines||q.value.replace(/\n$/,"").split("\n");if(q.lines=r,q.added||q.removed){if(!k){var s=j[p-1];k=n,l=o,s&&(m=f(s.lines.slice(-4)),k-=m.length,l-=m.length)}m.push.apply(m,r.map(function(a){return(q.added?"+":"-")+a})),g(m,p,q),q.added?o+=r.length:n+=r.length}else{if(k)if(r.length<=8&&p<j.length-2)m.push.apply(m,f(r));else{var t=Math.min(r.length,4);i.push("@@ -"+k+","+(n-k+t)+" +"+l+","+(o-l+t)+" @@"),i.push.apply(i,m),i.push.apply(i,f(r.slice(0,t))),r.length<=4&&g(i,p,q),k=0,l=0,m=[]}n+=r.length,o+=r.length}}return i.join("\n")+"\n"},convertChangesToXML:function(a){for(var b=[],d=0;d<a.length;d++){var e=a[d];e.added?b.push("<ins>"):e.removed&&b.push("<del>"),b.push(c(e.value)),e.added?b.push("</ins>"):e.removed&&b.push("</del>")}return b.join("")}}}();"undefined"!=typeof a&&(a.exports=b)}),a.register("browser/events.js",function(a,b){function c(a){return"[object Array]"=={}.toString.call(a)}function d(){}b.EventEmitter=d,d.prototype.on=function(a,b){return this.$events||(this.$events={}),this.$events[a]?c(this.$events[a])?this.$events[a].push(b):this.$events[a]=[this.$events[a],b]:this.$events[a]=b,this},d.prototype.addListener=d.prototype.on,d.prototype.once=function(a,b){function c(){d.removeListener(a,c),b.apply(this,arguments)}var d=this;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){if(this.$events&&this.$events[a]){var d=this.$events[a];if(c(d)){for(var e=-1,f=0,g=d.length;g>f;f++)if(d[f]===b||d[f].listener&&d[f].listener===b){e=f;break}if(0>e)return this;d.splice(e,1),d.length||delete this.$events[a]}else(d===b||d.listener&&d.listener===b)&&delete this.$events[a]}return this},d.prototype.removeAllListeners=function(a){return void 0===a?(this.$events={},this):(this.$events&&this.$events[a]&&(this.$events[a]=null),this)},d.prototype.listeners=function(a){return this.$events||(this.$events={}),this.$events[a]||(this.$events[a]=[]),c(this.$events[a])||(this.$events[a]=[this.$events[a]]),this.$events[a]},d.prototype.emit=function(a){if(!this.$events)return!1;var b=this.$events[a];if(!b)return!1;var d=[].slice.call(arguments,1);if("function"==typeof b)b.apply(this,d);else{if(!c(b))return!1;for(var e=b.slice(),f=0,g=e.length;g>f;f++)e[f].apply(this,d)}return!0}}),a.register("browser/fs.js",function(){}),a.register("browser/path.js",function(){}),a.register("browser/progress.js",function(a){function b(){this.percent=0,this.size(0),this.fontSize(11),this.font("helvetica, arial, sans-serif")}a.exports=b,b.prototype.size=function(a){return this._size=a,this},b.prototype.text=function(a){return this._text=a,this},b.prototype.fontSize=function(a){return this._fontSize=a,this},b.prototype.font=function(a){return this._font=a,this},b.prototype.update=function(a){return this.percent=a,this},b.prototype.draw=function(a){var b=Math.min(this.percent,100),c=this._size,d=c/2,e=d,f=d,g=d-1,h=this._fontSize;a.font=h+"px "+this._font;var i=2*Math.PI*(b/100);a.clearRect(0,0,c,c),a.strokeStyle="#9f9f9f",a.beginPath(),a.arc(e,f,g,0,i,!1),a.stroke(),a.strokeStyle="#eee",a.beginPath(),a.arc(e,f,g-1,0,i,!0),a.stroke();var j=this._text||(0|b)+"%",k=a.measureText(j).width;return a.fillText(j,e-k/2+1,f+h/2-1),this}}),a.register("browser/tty.js",function(a,b){b.isatty=function(){return!0},b.getWindowSize=function(){return[window.innerHeight,window.innerWidth]}}),a.register("context.js",function(a){function b(){}a.exports=b,b.prototype.runnable=function(a){return 0==arguments.length?this._runnable:(this.test=this._runnable=a,this)},b.prototype.timeout=function(a){return this.runnable().timeout(a),this},b.prototype.slow=function(a){return this.runnable().slow(a),this},b.prototype.inspect=function(){return JSON.stringify(this,function(a,b){return"_runnable"!=a&&"test"!=a?b:void 0},2)}}),a.register("hook.js",function(a,b,c){function d(a,b){f.call(this,a,b),this.type="hook"}function e(){}var f=c("./runnable");a.exports=d,e.prototype=f.prototype,d.prototype=new e,d.prototype.constructor=d,d.prototype.error=function(a){if(0==arguments.length){var a=this._error;return this._error=null,a}this._error=a}}),a.register("interfaces/bdd.js",function(a,b,c){var d=c("../suite"),e=c("../test");a.exports=function(a){var b=[a];a.on("pre-require",function(a,c,f){a.before=function(a){b[0].beforeAll(a)},a.after=function(a){b[0].afterAll(a)},a.beforeEach=function(a){b[0].beforeEach(a)},a.afterEach=function(a){b[0].afterEach(a)},a.describe=a.context=function(a,c){var e=d.create(b[0],a);return b.unshift(e),c.call(e),b.shift(),e},a.xdescribe=a.xcontext=a.describe.skip=function(a,c){var e=d.create(b[0],a);e.pending=!0,b.unshift(e),c.call(e),b.shift()},a.describe.only=function(b,c){var d=a.describe(b,c);f.grep(d.fullTitle())},a.it=a.specify=function(a,c){var d=b[0];if(d.pending)var c=null;var f=new e(a,c);return d.addTest(f),f},a.it.only=function(b,c){var d=a.it(b,c);f.grep(d.fullTitle())},a.xit=a.xspecify=a.it.skip=function(b){a.it(b)}})}}),a.register("interfaces/exports.js",function(a,b,c){var d=c("../suite"),e=c("../test");a.exports=function(a){function b(a){var f;for(var g in a)if("function"==typeof a[g]){var h=a[g];switch(g){case"before":c[0].beforeAll(h);break;case"after":c[0].afterAll(h);break;case"beforeEach":c[0].beforeEach(h);break;case"afterEach":c[0].afterEach(h);break;default:c[0].addTest(new e(g,h))}}else{var f=d.create(c[0],g);c.unshift(f),b(a[g]),c.shift()}}var c=[a];a.on("require",b)}}),a.register("interfaces/index.js",function(a,b,c){b.bdd=c("./bdd"),b.tdd=c("./tdd"),b.qunit=c("./qunit"),b.exports=c("./exports")}),a.register("interfaces/qunit.js",function(a,b,c){var d=c("../suite"),e=c("../test");a.exports=function(a){var b=[a];a.on("pre-require",function(a){a.before=function(a){b[0].beforeAll(a)},a.after=function(a){b[0].afterAll(a)},a.beforeEach=function(a){b[0].beforeEach(a)},a.afterEach=function(a){b[0].afterEach(a)},a.suite=function(a){b.length>1&&b.shift();var c=d.create(b[0],a);b.unshift(c)},a.test=function(a,c){b[0].addTest(new e(a,c))}})}}),a.register("interfaces/tdd.js",function(a,b,c){var d=c("../suite"),e=c("../test");a.exports=function(a){var b=[a];a.on("pre-require",function(a,c,f){a.setup=function(a){b[0].beforeEach(a)},a.teardown=function(a){b[0].afterEach(a)},a.suiteSetup=function(a){b[0].beforeAll(a)},a.suiteTeardown=function(a){b[0].afterAll(a)},a.suite=function(a,c){var e=d.create(b[0],a);return b.unshift(e),c.call(e),b.shift(),e},a.suite.only=function(b,c){var d=a.suite(b,c);f.grep(d.fullTitle())},a.test=function(a,c){var d=new e(a,c);return b[0].addTest(d),d},a.test.only=function(b,c){var d=a.test(b,c);f.grep(d.fullTitle())},a.test.skip=function(b){a.test(b)}})}}),a.register("mocha.js",function(a,b,c){function d(a){return __dirname+"/../images/"+a+".png"}function e(a){a=a||{},this.files=[],this.options=a,this.grep(a.grep),this.suite=new b.Suite("",new b.Context),this.ui(a.ui),this.bail(a.bail),this.reporter(a.reporter),a.timeout&&this.timeout(a.timeout),a.slow&&this.slow(a.slow)}var f=c("browser/path"),g=c("./utils");b=a.exports=e,b.utils=g,b.interfaces=c("./interfaces"),b.reporters=c("./reporters"),b.Runnable=c("./runnable"),b.Context=c("./context"),b.Runner=c("./runner"),b.Suite=c("./suite"),b.Hook=c("./hook"),b.Test=c("./test"),e.prototype.bail=function(a){return 0==arguments.length&&(a=!0),this.suite.bail(a),this},e.prototype.addFile=function(a){return this.files.push(a),this},e.prototype.reporter=function(a){if("function"==typeof a)this._reporter=a;else{a=a||"dot";try{this._reporter=c("./reporters/"+a)}catch(b){this._reporter=c(a)}if(!this._reporter)throw new Error('invalid reporter "'+a+'"')}return this},e.prototype.ui=function(a){if(a=a||"bdd",this._ui=b.interfaces[a],!this._ui)throw new Error('invalid interface "'+a+'"');return this._ui=this._ui(this.suite),this},e.prototype.loadFiles=function(a){var b=this,d=this.suite,e=this.files.length;this.files.forEach(function(g){g=f.resolve(g),d.emit("pre-require",global,g,b),d.emit("require",c(g),g,b),d.emit("post-require",global,g,b),--e||a&&a()})},e.prototype._growl=function(a,b){var e=c("growl");a.on("end",function(){var c=b.stats;if(c.failures){var f=c.failures+" of "+a.total+" tests failed";e(f,{name:"mocha",title:"Failed",image:d("error")})}else e(c.passes+" tests passed in "+c.duration+"ms",{name:"mocha",title:"Passed",image:d("ok")})})},e.prototype.grep=function(a){return this.options.grep="string"==typeof a?new RegExp(g.escapeRegexp(a)):a,this},e.prototype.invert=function(){return this.options.invert=!0,this},e.prototype.ignoreLeaks=function(){return this.options.ignoreLeaks=!0,this},e.prototype.checkLeaks=function(){return this.options.ignoreLeaks=!1,this},e.prototype.growl=function(){return this.options.growl=!0,this},e.prototype.globals=function(a){return this.options.globals=(this.options.globals||[]).concat(a),this},e.prototype.timeout=function(a){return this.suite.timeout(a),this},e.prototype.slow=function(a){return this.suite.slow(a),this},e.prototype.asyncOnly=function(){return this.options.asyncOnly=!0,this},e.prototype.run=function(a){this.files.length&&this.loadFiles();var c=this.suite,d=this.options,e=new b.Runner(c),f=new this._reporter(e);return e.ignoreLeaks=d.ignoreLeaks,e.asyncOnly=d.asyncOnly,d.grep&&e.grep(d.grep,d.invert),d.globals&&e.globals(d.globals),d.growl&&this._growl(e,f),e.run(a)}}),a.register("ms.js",function(a){function b(a){var b=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]),d=(b[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"y":return 315576e5*c;case"days":case"day":case"d":return 864e5*c;case"hours":case"hour":case"h":return 36e5*c;case"minutes":case"minute":case"m":return 6e4*c;case"seconds":case"second":case"s":return 1e3*c;case"ms":return c}}}function c(a){return a==g?Math.round(a/g)+" day":a>g?Math.round(a/g)+" days":a==f?Math.round(a/f)+" hour":a>f?Math.round(a/f)+" hours":a==e?Math.round(a/e)+" minute":a>e?Math.round(a/e)+" minutes":a==d?Math.round(a/d)+" second":a>d?Math.round(a/d)+" seconds":a+" ms"}var d=1e3,e=60*d,f=60*e,g=24*f;a.exports=function(a){return"string"==typeof a?b(a):c(a)}}),a.register("reporters/base.js",function(a,b,c){function d(a){var b=this.stats={suites:0,tests:0,passes:0,pending:0,failures:0},c=this.failures=[];a&&(this.runner=a,a.stats=b,a.on("start",function(){b.start=new k}),a.on("suite",function(a){b.suites=b.suites||0,a.root||b.suites++}),a.on("test end",function(){b.tests=b.tests||0,b.tests++}),a.on("pass",function(a){b.passes=b.passes||0;var c=a.slow()/2;a.speed=a.duration>a.slow()?"slow":a.duration>c?"medium":"fast",b.passes++}),a.on("fail",function(a,d){b.failures=b.failures||0,b.failures++,a.err=d,c.push(a)}),a.on("end",function(){b.end=new k,b.duration=new k-b.start}),a.on("pending",function(){b.pending++}))}function e(a,b){return a=String(a),Array(b-a.length+1).join(" ")+a}function f(a,b,c){return i["diff"+b](a.actual,a.expected).map(function(a){return c&&(a.value=a.value.replace(/\t/g,"<tab>").replace(/\r/g,"<CR>").replace(/\n/g,"<LF>\n")),a.added?g("diff added",a.value):a.removed?g("diff removed",a.value):a.value}).join("")}function g(a,b){return b.split("\n").map(function(b){return m(a,b)}).join("\n")}var h=c("browser/tty"),i=c("browser/diff"),j=c("../ms"),k=global.Date;global.setTimeout,global.setInterval,global.clearTimeout,global.clearInterval;var l=h.isatty(1)&&h.isatty(2);b=a.exports=d,b.useColors=l,b.colors={pass:90,fail:31,"bright pass":92,"bright fail":91,"bright yellow":93,pending:36,suite:0,"error title":0,"error message":31,"error stack":90,checkmark:32,fast:90,medium:33,slow:31,green:32,light:90,"diff gutter":90,"diff added":42,"diff removed":41},b.symbols={ok:"✓",err:"✖",dot:"․"},"win32"==process.platform&&(b.symbols.ok="√",b.symbols.err="×",b.symbols.dot=".");var m=b.color=function(a,c){return b.useColors?"["+b.colors[a]+"m"+c+"[0m":c};b.window={width:l?process.stdout.getWindowSize?process.stdout.getWindowSize(1)[0]:h.getWindowSize()[1]:75},b.cursor={hide:function(){process.stdout.write("[?25l")},show:function(){process.stdout.write("[?25h")},deleteLine:function(){process.stdout.write("[2K")},beginningOfLine:function(){process.stdout.write("[0G")},CR:function(){b.cursor.deleteLine(),b.cursor.beginningOfLine()}},b.list=function(a){console.error(),a.forEach(function(a,b){var c=m("error title","  %s) %s:\n")+m("error message","     %s")+m("error stack","\n%s\n"),d=a.err,g=d.message||"",h=d.stack||g,i=h.indexOf(g)+g.length,j=h.slice(0,i),k=d.actual,l=d.expected,n=!0;if(d.showDiff&&(n=!1,d.actual=k=JSON.stringify(k,null,2),d.expected=l=JSON.stringify(l,null,2)),"string"==typeof k&&"string"==typeof l){var o=Math.max(k.length,l.length);j=20>o?f(d,"Chars",n):f(d,"Words",n);var p=j.split("\n");if(p.length>4){var q=String(p.length).length;j=p.map(function(a,b){return e(++b,q)+" | "+a}).join("\n")}j="\n"+m("diff removed","actual")+" "+m("diff added","expected")+"\n\n"+j+"\n",j=j.replace(/^/gm,"      "),c=m("error title","  %s) %s:\n%s")+m("error stack","\n%s\n")}h=h.slice(i?i+1:i).replace(/^/gm,"  "),console.error(c,b+1,a.fullTitle(),j,h)})},d.prototype.epilogue=function(){function a(a){return 1==a?"test":"tests"}var c,e=this.stats;return console.log(),e.failures?(c=m("bright fail","  "+b.symbols.err)+m("fail"," %d of %d %s failed")+m("light",":"),console.error(c,e.failures,this.runner.total,a(this.runner.total)),d.list(this.failures),console.error(),void 0):(c=m("bright pass"," ")+m("green"," %d %s complete")+m("light"," (%s)"),console.log(c,e.tests||0,a(e.tests),j(e.duration)),e.pending&&(c=m("pending"," ")+m("pending"," %d %s pending"),console.log(c,e.pending,a(e.pending))),console.log(),void 0)}}),a.register("reporters/doc.js",function(a,b,c){function d(a){function b(){return Array(c).join("  ")}e.call(this,a);var c=(this.stats,a.total,2);a.on("suite",function(a){a.root||(++c,console.log('%s<section class="suite">',b()),++c,console.log("%s<h1>%s</h1>",b(),f.escape(a.title)),console.log("%s<dl>",b()))}),a.on("suite end",function(a){a.root||(console.log("%s</dl>",b()),--c,console.log("%s</section>",b()),--c)}),a.on("pass",function(a){console.log("%s  <dt>%s</dt>",b(),f.escape(a.title));var c=f.escape(f.clean(a.fn.toString()));console.log("%s  <dd><pre><code>%s</code></pre></dd>",b(),c)})}var e=c("./base"),f=c("../utils");b=a.exports=d}),a.register("reporters/dot.js",function(a,b,c){function d(a){f.call(this,a);var b=this,c=(this.stats,0|.75*f.window.width),d=0;a.on("start",function(){process.stdout.write("\n  ")}),a.on("pending",function(){process.stdout.write(g("pending",f.symbols.dot))}),a.on("pass",function(a){0==++d%c&&process.stdout.write("\n  "),"slow"==a.speed?process.stdout.write(g("bright yellow",f.symbols.dot)):process.stdout.write(g(a.speed,f.symbols.dot))}),a.on("fail",function(){0==++d%c&&process.stdout.write("\n  "),process.stdout.write(g("fail",f.symbols.dot))}),a.on("end",function(){console.log(),b.epilogue()})}function e(){}var f=c("./base"),g=f.color;b=a.exports=d,e.prototype=f.prototype,d.prototype=new e,d.prototype.constructor=d}),a.register("reporters/html-cov.js",function(a,b,c){function d(a){var b=c("jade"),d=__dirname+"/templates/coverage.jade",h=g.readFileSync(d,"utf8"),i=b.compile(h,{filename:d}),j=this;f.call(this,a,!1),a.on("end",function(){process.stdout.write(i({cov:j.cov,coverageClass:e}))})}function e(a){return a>=75?"high":a>=50?"medium":a>=25?"low":"terrible"}var f=c("./json-cov"),g=c("browser/fs");b=a.exports=d}),a.register("reporters/html.js",function(a,b,c){function d(a,b){k.call(this,a);var c,d,q=this.stats,r=(a.total,f(p)),s=r.getElementsByTagName("li"),t=s[1].getElementsByTagName("em")[0],u=s[1].getElementsByTagName("a")[0],v=s[2].getElementsByTagName("em")[0],w=s[2].getElementsByTagName("a")[0],x=s[3].getElementsByTagName("em")[0],y=r.getElementsByTagName("canvas")[0],z=f('<ul id="mocha-report"></ul>'),A=[z];if(b=b||document.getElementById("mocha"),y.getContext){var B=window.devicePixelRatio||1;y.style.width=y.width,y.style.height=y.height,y.width*=B,y.height*=B,d=y.getContext("2d"),d.scale(B,B),c=new m}return b?(j(u,"click",function(){h();var a=/pass/.test(z.className)?"":" pass";z.className=z.className.replace(/fail|pass/g,"")+a,z.className.trim()&&g("test pass")}),j(w,"click",function(){h();var a=/fail/.test(z.className)?"":" fail";z.className=z.className.replace(/fail|pass/g,"")+a,z.className.trim()&&g("test fail")}),b.appendChild(r),b.appendChild(z),c&&c.size(40),a.on("suite",function(a){if(!a.root){var b="?grep="+encodeURIComponent(a.fullTitle()),c=f('<li class="suite"><h1><a href="%s">%s</a></h1></li>',b,n(a.title));A[0].appendChild(c),A.unshift(document.createElement("ul")),c.appendChild(A[0])}}),a.on("suite end",function(a){a.root||A.shift()}),a.on("fail",function(b){"hook"==b.type&&a.emit("test end",b)}),a.on("test end",function(a){window.scrollTo(0,document.body.scrollHeight);var b=0|100*(q.tests/this.total);c&&c.update(b).draw(d);var e=new o-q.start;if(i(t,q.passes),i(v,q.failures),i(x,(e/1e3).toFixed(2)),"passed"==a.state)var g=f('<li class="test pass %e"><h2>%e<span class="duration">%ems</span> <a href="?grep=%e" class="replay">‣</a></h2></li>',a.speed,a.title,a.duration,encodeURIComponent(a.fullTitle()));else if(a.pending)var g=f('<li class="test pass pending"><h2>%e</h2></li>',a.title);else{var g=f('<li class="test fail"><h2>%e <a href="?grep=%e" class="replay">‣</a></h2></li>',a.title,encodeURIComponent(a.fullTitle())),h=a.err.stack||a.err.toString();~h.indexOf(a.err.message)||(h=a.err.message+"\n"+h),"[object Error]"==h&&(h=a.err.message),!a.err.stack&&a.err.sourceURL&&void 0!==a.err.line&&(h+="\n("+a.err.sourceURL+":"+a.err.line+")"),g.appendChild(f('<pre class="error">%e</pre>',h))}if(!a.pending){var k=g.getElementsByTagName("h2")[0];j(k,"click",function(){m.style.display="none"==m.style.display?"block":"none"});var m=f("<pre><code>%e</code></pre>",l.clean(a.fn.toString()));g.appendChild(m),m.style.display="none"}A[0]&&A[0].appendChild(g)}),void 0):e("#mocha div missing, add it to your document")}function e(a){document.body.appendChild(f('<div id="mocha-error">%s</div>',a))}function f(a){var b=arguments,c=document.createElement("div"),d=1;return c.innerHTML=a.replace(/%([se])/g,function(a,c){switch(c){case"s":return String(b[d++]);case"e":return n(b[d++])}}),c.firstChild}function g(a){for(var b=document.getElementsByClassName("suite"),c=0;c<b.length;c++){var d=b[c].getElementsByClassName(a);0==d.length&&(b[c].className+=" hidden")}}function h(){for(var a=document.getElementsByClassName("suite hidden"),b=0;b<a.length;++b)a[b].className=a[b].className.replace("suite hidden","suite")}function i(a,b){a.textContent?a.textContent=b:a.innerText=b}function j(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}var k=c("./base"),l=c("../utils"),m=c("../browser/progress"),n=l.escape,o=global.Date;global.setTimeout,global.setInterval,global.clearTimeout,global.clearInterval,b=a.exports=d;var p='<ul id="mocha-stats"><li class="progress"><canvas width="40" height="40"></canvas></li><li class="passes"><a href="#">passes:</a> <em>0</em></li><li class="failures"><a href="#">failures:</a> <em>0</em></li><li class="duration">duration: <em>0</em>s</li></ul>'}),a.register("reporters/index.js",function(a,b,c){b.Base=c("./base"),b.Dot=c("./dot"),b.Doc=c("./doc"),b.TAP=c("./tap"),b.JSON=c("./json"),b.HTML=c("./html"),b.List=c("./list"),b.Min=c("./min"),b.Spec=c("./spec"),b.Nyan=c("./nyan"),b.XUnit=c("./xunit"),b.Markdown=c("./markdown"),b.Progress=c("./progress"),b.Landing=c("./landing"),b.JSONCov=c("./json-cov"),b.HTMLCov=c("./html-cov"),b.JSONStream=c("./json-stream"),b.Teamcity=c("./teamcity")}),a.register("reporters/json-cov.js",function(a,b,c){function d(a,b){var c=this,b=1==arguments.length?!0:b;h.call(this,a);var d=[],f=[],i=[];a.on("test end",function(a){d.push(a)}),a.on("pass",function(a){i.push(a)}),a.on("fail",function(a){f.push(a)}),a.on("end",function(){var a=global._$jscoverage||{},h=c.cov=e(a);h.stats=c.stats,h.tests=d.map(g),h.failures=f.map(g),h.passes=i.map(g),b&&process.stdout.write(JSON.stringify(h,null,2))})}function e(a){var b={instrumentation:"node-jscoverage",sloc:0,hits:0,misses:0,coverage:0,files:[]};for(var c in a){var d=f(c,a[c]);b.files.push(d),b.hits+=d.hits,b.misses+=d.misses,b.sloc+=d.sloc}return b.files.sort(function(a,b){return a.filename.localeCompare(b.filename)}),b.sloc>0&&(b.coverage=100*(b.hits/b.sloc)),b}function f(a,b){var c={filename:a,coverage:0,hits:0,misses:0,sloc:0,source:{}};return b.source.forEach(function(a,d){d++,0===b[d]?(c.misses++,c.sloc++):void 0!==b[d]&&(c.hits++,c.sloc++),c.source[d]={source:a,coverage:void 0===b[d]?"":b[d]}}),c.coverage=100*(c.hits/c.sloc),c}function g(a){return{title:a.title,fullTitle:a.fullTitle(),duration:a.duration}}var h=c("./base");b=a.exports=d}),a.register("reporters/json-stream.js",function(a,b,c){function d(a){f.call(this,a);var b=this,c=(this.stats,a.total);a.on("start",function(){console.log(JSON.stringify(["start",{total:c}]))}),a.on("pass",function(a){console.log(JSON.stringify(["pass",e(a)]))}),a.on("fail",function(a){console.log(JSON.stringify(["fail",e(a)]))}),a.on("end",function(){process.stdout.write(JSON.stringify(["end",b.stats]))})}function e(a){return{title:a.title,fullTitle:a.fullTitle(),duration:a.duration}}var f=c("./base");f.color,b=a.exports=d}),a.register("reporters/json.js",function(a,b,c){function d(a){var b=this;f.call(this,a);var c=[],d=[],g=[];a.on("test end",function(a){c.push(a)}),a.on("pass",function(a){g.push(a)}),a.on("fail",function(a){d.push(a)}),a.on("end",function(){var a={stats:b.stats,tests:c.map(e),failures:d.map(e),passes:g.map(e)};process.stdout.write(JSON.stringify(a,null,2))})}function e(a){return{title:a.title,fullTitle:a.fullTitle(),duration:a.duration}}var f=c("./base");f.cursor,f.color,b=a.exports=d}),a.register("reporters/landing.js",function(a,b,c){function d(a){function b(){var a=Array(d).join("-");return"  "+h("runway",a)}f.call(this,a);var c=this,d=(this.stats,0|.75*f.window.width),e=a.total,i=process.stdout,j=h("plane","✈"),k=-1,l=0;a.on("start",function(){i.write("\n  "),g.hide()}),a.on("test end",function(a){var c=-1==k?0|d*++l/e:k;"failed"==a.state&&(j=h("plane crash","✈"),k=c),i.write("[4F\n\n"),i.write(b()),i.write("\n  "),i.write(h("runway",Array(c).join("⋅"))),i.write(j),i.write(h("runway",Array(d-c).join("⋅")+"\n")),i.write(b()),i.write("[0m")}),a.on("end",function(){g.show(),console.log(),c.epilogue()})}function e(){}var f=c("./base"),g=f.cursor,h=f.color;b=a.exports=d,f.colors.plane=0,f.colors["plane crash"]=31,f.colors.runway=90,e.prototype=f.prototype,d.prototype=new e,d.prototype.constructor=d}),a.register("reporters/list.js",function(a,b,c){function d(a){f.call(this,a);var b=this,c=(this.stats,0);a.on("start",function(){console.log()}),a.on("test",function(a){process.stdout.write(h("pass","    "+a.fullTitle()+": "))}),a.on("pending",function(a){var b=h("checkmark","  -")+h("pending"," %s");console.log(b,a.fullTitle())}),a.on("pass",function(a){var b=h("checkmark","  "+f.symbols.dot)+h("pass"," %s: ")+h(a.speed,"%dms");g.CR(),console.log(b,a.fullTitle(),a.duration)}),a.on("fail",function(a){g.CR(),console.log(h("fail","  %d) %s"),++c,a.fullTitle())}),a.on("end",b.epilogue.bind(b))}function e(){}var f=c("./base"),g=f.cursor,h=f.color;b=a.exports=d,e.prototype=f.prototype,d.prototype=new e,d.prototype.constructor=d}),a.register("reporters/markdown.js",function(a,b,c){function d(a){function b(a){return Array(h).join("#")+" "+a}function c(a,b){var d=b;return b=b[a.title]=b[a.title]||{suite:a},a.suites.forEach(function(a){c(a,b)}),d}function d(a,b){++b;var c,e="";for(var g in a)"suite"!=g&&(g&&(c=" - ["+g+"](#"+f.slug(a[g].suite.fullTitle())+")\n"),g&&(e+=Array(b).join("  ")+c),e+=d(a[g],b));return--b,e}function g(a){var b=c(a,{});return d(b,0)}e.call(this,a);var h=(this.stats,0),i="";g(a.suite),a.on("suite",function(a){++h;var c=f.slug(a.fullTitle());i+='<a name="'+c+'"></a>\n',i+=b(a.title)+"\n"}),a.on("suite end",function(){--h}),a.on("pass",function(a){var b=f.clean(a.fn.toString());i+=a.title+".\n",i+="\n```js\n",i+=b+"\n",i+="```\n\n"}),a.on("end",function(){process.stdout.write("# TOC\n"),process.stdout.write(g(a.suite)),process.stdout.write(i)})}var e=c("./base"),f=c("../utils");b=a.exports=d}),a.register("reporters/min.js",function(a,b,c){function d(a){f.call(this,a),a.on("start",function(){process.stdout.write("[2J"),process.stdout.write("[1;3H")}),a.on("end",this.epilogue.bind(this))}function e(){}var f=c("./base");b=a.exports=d,e.prototype=f.prototype,d.prototype=new e,d.prototype.constructor=d}),a.register("reporters/nyan.js",function(a,b,c){function d(a){g.call(this,a);var b=this,c=(this.stats,0|.75*g.window.width),d=(this.rainbowColors=b.generateColors(),this.colorIndex=0,this.numberOfLines=4,this.trajectories=[[],[],[],[]],this.nyanCatWidth=11);this.trajectoryWidthMax=c-d,this.scoreboardWidth=5,this.tick=0,a.on("start",function(){g.cursor.hide(),b.draw("start")}),a.on("pending",function(){b.draw("pending")}),a.on("pass",function(){b.draw("pass")}),a.on("fail",function(){b.draw("fail")}),a.on("end",function(){g.cursor.show();for(var a=0;a<b.numberOfLines;a++)e("\n");b.epilogue()})}function e(a){process.stdout.write(a)}function f(){}var g=c("./base");g.color,b=a.exports=d,d.prototype.draw=function(a){this.appendRainbow(),this.drawScoreboard(),this.drawRainbow(),this.drawNyanCat(a),this.tick=!this.tick},d.prototype.drawScoreboard=function(){function a(a,b){e(" "),e("["+a+"m"+b+"[0m"),e("\n")}var b=this.stats,c=g.colors;a(c.green,b.passes),a(c.fail,b.failures),a(c.pending,b.pending),e("\n"),this.cursorUp(this.numberOfLines)},d.prototype.appendRainbow=function(){for(var a=this.tick?"_":"-",b=this.rainbowify(a),c=0;c<this.numberOfLines;c++){var d=this.trajectories[c];d.length>=this.trajectoryWidthMax&&d.shift(),d.push(b)}},d.prototype.drawRainbow=function(){var a=this;this.trajectories.forEach(function(b){e("["+a.scoreboardWidth+"C"),e(b.join("")),e("\n")}),this.cursorUp(this.numberOfLines)},d.prototype.drawNyanCat=function(a){var b=this,c=this.scoreboardWidth+this.trajectories[0].length;[0,1,2,3].forEach(function(d){switch(e("["+c+"C"),d){case 0:e("_,------,"),e("\n");break;case 1:var f=b.tick?"  ":"   ";e("_|"+f+"/\\_/\\ "),e("\n");break;case 2:var g,f=b.tick?"_":"__",h=b.tick?"~":"^";switch(a){case"pass":g="( ^ .^)";break;case"fail":g="( o .o)";break;default:g="( - .-)"}e(h+"|"+f+g+" "),e("\n");break;case 3:var f=b.tick?" ":"  ";e(f+'""  "" '),e("\n")}}),this.cursorUp(this.numberOfLines)},d.prototype.cursorUp=function(a){e("["+a+"A")},d.prototype.cursorDown=function(a){e("["+a+"B")},d.prototype.generateColors=function(){for(var a=[],b=0;42>b;b++){var c=Math.floor(Math.PI/3),d=b*(1/6),e=Math.floor(3*Math.sin(d)+3),f=Math.floor(3*Math.sin(d+2*c)+3),g=Math.floor(3*Math.sin(d+4*c)+3);a.push(36*e+6*f+g+16)}return a},d.prototype.rainbowify=function(a){var b=this.rainbowColors[this.colorIndex%this.rainbowColors.length];return this.colorIndex+=1,"[38;5;"+b+"m"+a+"[0m"},f.prototype=g.prototype,d.prototype=new f,d.prototype.constructor=d}),a.register("reporters/progress.js",function(a,b,c){function d(a,b){f.call(this,a);var c=this,b=b||{},d=(this.stats,0|.5*f.window.width),e=a.total,i=0;Math.max,b.open=b.open||"[",b.complete=b.complete||"▬",b.incomplete=b.incomplete||f.symbols.dot,b.close=b.close||"]",b.verbose=!1,a.on("start",function(){console.log(),g.hide()}),a.on("test end",function(){i++;var a=i/e,c=0|d*a,f=d-c;g.CR(),process.stdout.write("[J"),process.stdout.write(h("progress","  "+b.open)),process.stdout.write(Array(c).join(b.complete)),process.stdout.write(Array(f).join(b.incomplete)),process.stdout.write(h("progress",b.close)),b.verbose&&process.stdout.write(h("progress"," "+i+" of "+e))}),a.on("end",function(){g.show(),console.log(),c.epilogue()})}function e(){}var f=c("./base"),g=f.cursor,h=f.color;b=a.exports=d,f.colors.progress=90,e.prototype=f.prototype,d.prototype=new e,d.prototype.constructor=d}),a.register("reporters/spec.js",function(a,b,c){function d(a){function b(){return Array(d).join("  ")}f.call(this,a);var c=this,d=(this.stats,0),e=0;a.on("start",function(){console.log()}),a.on("suite",function(a){++d,console.log(h("suite","%s%s"),b(),a.title)}),a.on("suite end",function(){--d,1==d&&console.log()}),a.on("test",function(a){process.stdout.write(b()+h("pass","  ◦ "+a.title+": "))}),a.on("pending",function(a){var c=b()+h("pending","  - %s");console.log(c,a.title)}),a.on("pass",function(a){if("fast"==a.speed){var c=b()+h("checkmark","  "+f.symbols.ok)+h("pass"," %s ");g.CR(),console.log(c,a.title)}else{var c=b()+h("checkmark","  "+f.symbols.ok)+h("pass"," %s ")+h(a.speed,"(%dms)");g.CR(),console.log(c,a.title,a.duration)}}),a.on("fail",function(a){g.CR(),console.log(b()+h("fail","  %d) %s"),++e,a.title)
}),a.on("end",c.epilogue.bind(c))}function e(){}var f=c("./base"),g=f.cursor,h=f.color;b=a.exports=d,e.prototype=f.prototype,d.prototype=new e,d.prototype.constructor=d}),a.register("reporters/tap.js",function(a,b,c){function d(a){f.call(this,a);var b=(this.stats,1),c=0,d=0;a.on("start",function(){var b=a.grepTotal(a.suite);console.log("%d..%d",1,b)}),a.on("test end",function(){++b}),a.on("pending",function(a){console.log("ok %d %s # SKIP -",b,e(a))}),a.on("pass",function(a){c++,console.log("ok %d %s",b,e(a))}),a.on("fail",function(a,c){d++,console.log("not ok %d %s",b,e(a)),c.stack&&console.log(c.stack.replace(/^/gm,"  "))}),a.on("end",function(){console.log("# tests "+(c+d)),console.log("# pass "+c),console.log("# fail "+d)})}function e(a){return a.fullTitle().replace(/#/g,"")}var f=c("./base");f.cursor,f.color,b=a.exports=d}),a.register("reporters/teamcity.js",function(a,b,c){function d(a){f.call(this,a);var b=this.stats;a.on("start",function(){console.log("##teamcity[testSuiteStarted name='mocha.suite']")}),a.on("test",function(a){console.log("##teamcity[testStarted name='"+e(a.fullTitle())+"']")}),a.on("fail",function(a,b){console.log("##teamcity[testFailed name='"+e(a.fullTitle())+"' message='"+e(b.message)+"']")}),a.on("pending",function(a){console.log("##teamcity[testIgnored name='"+e(a.fullTitle())+"' message='pending']")}),a.on("test end",function(a){console.log("##teamcity[testFinished name='"+e(a.fullTitle())+"' duration='"+a.duration+"']")}),a.on("end",function(){console.log("##teamcity[testSuiteFinished name='mocha.suite' duration='"+b.duration+"']")})}function e(a){return a.replace(/\|/g,"||").replace(/\n/g,"|n").replace(/\r/g,"|r").replace(/\[/g,"|[").replace(/\]/g,"|]").replace(/\u0085/g,"|x").replace(/\u2028/g,"|l").replace(/\u2029/g,"|p").replace(/'/g,"|'")}var f=c("./base");b=a.exports=d}),a.register("reporters/xunit.js",function(a,b,c){function d(a){i.call(this,a);var b=this.stats,c=[];a.on("pass",function(a){c.push(a)}),a.on("fail",function(a){c.push(a)}),a.on("end",function(){console.log(g("testsuite",{name:"Mocha Tests",tests:b.tests,failures:b.failures,errors:b.failures,skip:b.tests-b.failures-b.passes,timestamp:(new l).toUTCString(),time:b.duration/1e3},!1)),c.forEach(f),console.log("</testsuite>")})}function e(){}function f(a){var b={classname:a.parent.fullTitle(),name:a.title,time:a.duration/1e3};if("failed"==a.state){var c=a.err;b.message=k(c.message),console.log(g("testcase",b,!1,g("failure",b,!1,h(c.stack))))}else a.pending?console.log(g("testcase",b,!1,g("skipped",{},!0))):console.log(g("testcase",b,!0))}function g(a,b,c,d){var e,f=c?"/>":">",g=[];for(var h in b)g.push(h+'="'+k(b[h])+'"');return e="<"+a+(g.length?" "+g.join(" "):"")+f,d&&(e+=d+"</"+a+f),e}function h(a){return"<![CDATA["+k(a)+"]]>"}var i=c("./base"),j=c("../utils"),k=j.escape,l=global.Date;global.setTimeout,global.setInterval,global.clearTimeout,global.clearInterval,b=a.exports=d,e.prototype=i.prototype,d.prototype=new e,d.prototype.constructor=d}),a.register("runnable.js",function(a,b,c){function d(a,b){this.title=a,this.fn=b,this.async=b&&b.length,this.sync=!this.async,this._timeout=2e3,this._slow=75,this.timedOut=!1}function e(){}var f=c("browser/events").EventEmitter,g=c("browser/debug")("mocha:runnable"),h=c("./ms"),i=global.Date,j=global.setTimeout,k=(global.setInterval,global.clearTimeout);global.clearInterval;var l=Object.prototype.toString;a.exports=d,e.prototype=f.prototype,d.prototype=new e,d.prototype.constructor=d,d.prototype.timeout=function(a){return 0==arguments.length?this._timeout:("string"==typeof a&&(a=h(a)),g("timeout %d",a),this._timeout=a,this.timer&&this.resetTimeout(),this)},d.prototype.slow=function(a){return 0===arguments.length?this._slow:("string"==typeof a&&(a=h(a)),g("timeout %d",a),this._slow=a,this)},d.prototype.fullTitle=function(){return this.parent.fullTitle()+" "+this.title},d.prototype.clearTimeout=function(){k(this.timer)},d.prototype.inspect=function(){return JSON.stringify(this,function(a,b){return"_"!=a[0]?"parent"==a?"#<Suite>":"ctx"==a?"#<Context>":b:void 0},2)},d.prototype.resetTimeout=function(){var a=this,b=this.timeout();this.clearTimeout(),b&&(this.timer=j(function(){a.callback(new Error("timeout of "+b+"ms exceeded")),a.timedOut=!0},b))},d.prototype.run=function(a){function b(a){e||(e=!0,f.emit("error",a||new Error("done() called multiple times")))}function c(c){if(!f.timedOut){if(d)return b(c);f.clearTimeout(),f.duration=new i-h,d=!0,a(c)}}var d,e,f=this,g=this.timeout(),h=new i,k=this.ctx;if(k&&k.runnable(this),this.async&&g&&(this.timer=j(function(){c(new Error("timeout of "+g+"ms exceeded")),f.timedOut=!0},g)),this.callback=c,this.async)try{this.fn.call(k,function(a){return a instanceof Error||"[object Error]"===l.call(a)?c(a):null!=a?c(new Error("done() invoked with non-Error: "+a)):(c(),void 0)})}catch(m){c(m)}else{if(this.asyncOnly)return c(new Error("--async-only option in use without declaring `done()`"));try{this.pending||this.fn.call(k),this.duration=new i-h,a()}catch(m){a(m)}}}}),a.register("runner.js",function(a,b,c){function d(a){var b=this;this._globals=[],this.suite=a,this.total=a.total(),this.failures=0,this.on("test end",function(a){b.checkGlobals(a)}),this.on("hook end",function(a){b.checkGlobals(a)}),this.grep(/.*/),this.globals(this.globalProps().concat(["errno"]))}function e(){}function f(a,b){return j(b,function(b){var c=j(a,function(a){return~a.indexOf("*")?0==b.indexOf(a.split("*")[0]):/^mocha-/.test(b)?!0:b==a});return 0==c.length&&(!global.navigator||"onerror"!==b)})}var g=c("browser/events").EventEmitter,h=c("browser/debug")("mocha:runner"),i=(c("./test"),c("./utils")),j=i.filter,k=(i.keys,global.setImmediate||process.nextTick),l=["setTimeout","clearTimeout","setInterval","clearInterval","XMLHttpRequest","Date"];a.exports=d,e.prototype=g.prototype,d.prototype=new e,d.prototype.constructor=d,d.prototype.grep=function(a,b){return h("grep %s",a),this._grep=a,this._invert=b,this.total=this.grepTotal(this.suite),this},d.prototype.grepTotal=function(a){var b=this,c=0;return a.eachTest(function(a){var d=b._grep.test(a.fullTitle());b._invert&&(d=!d),d&&c++}),c},d.prototype.globalProps=function(){for(var a=i.keys(global),b=0;b<l.length;++b)~i.indexOf(a,l[b])||a.push(l[b]);return a},d.prototype.globals=function(a){return 0==arguments.length?this._globals:(h("globals %j",a),i.forEach(a,function(a){this._globals.push(a)},this),this)},d.prototype.checkGlobals=function(a){if(!this.ignoreLeaks){var b,c=this._globals,d=this.globalProps(),e=process.kill;e&&1==c.length-d.length||2!=c.length-d.length&&(b=f(c,d),this._globals=this._globals.concat(b),b.length>1?this.fail(a,new Error("global leaks detected: "+b.join(", "))):b.length&&this.fail(a,new Error("global leak detected: "+b[0])))}},d.prototype.fail=function(a,b){++this.failures,a.state="failed","string"==typeof b&&(b=new Error('the string "'+b+'" was thrown, throw an Error :)')),this.emit("fail",a,b)},d.prototype.failHook=function(a,b){this.fail(a,b),this.emit("end")},d.prototype.hook=function(a,b){function c(a){var d=e[a];return d?(f.currentRunnable=d,f.emit("hook",d),d.on("error",function(a){f.failHook(d,a)}),d.run(function(b){d.removeAllListeners("error");var e=d.error();return e&&f.fail(f.test,e),b?f.failHook(d,b):(f.emit("hook end",d),c(++a),void 0)}),void 0):b()}var d=this.suite,e=d["_"+a],f=this;k(function(){c(0)})},d.prototype.hooks=function(a,b,c){function d(g){return e.suite=g,g?(e.hook(a,function(a){return a?(e.suite=f,c(a)):(d(b.pop()),void 0)}),void 0):(e.suite=f,c())}var e=this,f=this.suite;d(b.pop())},d.prototype.hookUp=function(a,b){var c=[this.suite].concat(this.parents()).reverse();this.hooks(a,c,b)},d.prototype.hookDown=function(a,b){var c=[this.suite].concat(this.parents());this.hooks(a,c,b)},d.prototype.parents=function(){for(var a=this.suite,b=[];a=a.parent;)b.push(a);return b},d.prototype.runTest=function(a){var b=this.test,c=this;this.asyncOnly&&(b.asyncOnly=!0);try{b.on("error",function(a){c.fail(b,a)}),b.run(a)}catch(d){a(d)}},d.prototype.runTests=function(a,b){function c(){if(e.failures&&a._bail)return b();if(d=f.shift(),!d)return b();var g=e._grep.test(d.fullTitle());return e._invert&&(g=!g),g?d.pending?(e.emit("pending",d),e.emit("test end",d),c()):(e.emit("test",e.test=d),e.hookDown("beforeEach",function(){e.currentRunnable=e.test,e.runTest(function(a){return d=e.test,a?(e.fail(d,a),e.emit("test end",d),e.hookUp("afterEach",c)):(d.state="passed",e.emit("pass",d),e.emit("test end",d),e.hookUp("afterEach",c),void 0)})}),void 0):c()}var d,e=this,f=a.tests.slice();this.next=c,c()},d.prototype.runSuite=function(a,b){function c(){var b=a.suites[g++];return b?(f.runSuite(b,c),void 0):d()}function d(){f.suite=a,f.hook("afterAll",function(){f.emit("suite end",a),b()})}var e=this.grepTotal(a),f=this,g=0;return h("run suite %s",a.fullTitle()),e?(this.emit("suite",this.suite=a),this.hook("beforeAll",function(){f.runTests(a,c)}),void 0):b()},d.prototype.uncaught=function(a){h("uncaught exception %s",a.message);var b=this.currentRunnable;if(b&&"failed"!=b.state)return b.clearTimeout(),a.uncaught=!0,this.fail(b,a),"test"==b.type?(this.emit("test end",b),this.hookUp("afterEach",this.next),void 0):(this.emit("end"),void 0)},d.prototype.run=function(a){function b(a){c.uncaught(a)}var c=this,a=a||function(){};return h("start"),this.on("end",function(){h("end"),process.removeListener("uncaughtException",b),a(c.failures)}),this.emit("start"),this.runSuite(this.suite,function(){h("finished running"),c.emit("end")}),process.on("uncaughtException",b),this}}),a.register("suite.js",function(a,b,c){function d(a,b){this.title=a,this.ctx=b,this.suites=[],this.tests=[],this.pending=!1,this._beforeEach=[],this._beforeAll=[],this._afterEach=[],this._afterAll=[],this.root=!a,this._timeout=2e3,this._slow=75,this._bail=!1}function e(){}var f=c("browser/events").EventEmitter,g=c("browser/debug")("mocha:suite"),h=c("./ms"),i=c("./utils"),j=c("./hook");b=a.exports=d,b.create=function(a,b){var c=new d(b,a.ctx);return c.parent=a,a.pending&&(c.pending=!0),b=c.fullTitle(),a.addSuite(c),c},e.prototype=f.prototype,d.prototype=new e,d.prototype.constructor=d,d.prototype.clone=function(){var a=new d(this.title);return g("clone"),a.ctx=this.ctx,a.timeout(this.timeout()),a.slow(this.slow()),a.bail(this.bail()),a},d.prototype.timeout=function(a){return 0==arguments.length?this._timeout:("string"==typeof a&&(a=h(a)),g("timeout %d",a),this._timeout=parseInt(a,10),this)},d.prototype.slow=function(a){return 0===arguments.length?this._slow:("string"==typeof a&&(a=h(a)),g("slow %d",a),this._slow=a,this)},d.prototype.bail=function(a){return 0==arguments.length?this._bail:(g("bail %s",a),this._bail=a,this)},d.prototype.beforeAll=function(a){if(this.pending)return this;var b=new j('"before all" hook',a);return b.parent=this,b.timeout(this.timeout()),b.slow(this.slow()),b.ctx=this.ctx,this._beforeAll.push(b),this.emit("beforeAll",b),this},d.prototype.afterAll=function(a){if(this.pending)return this;var b=new j('"after all" hook',a);return b.parent=this,b.timeout(this.timeout()),b.slow(this.slow()),b.ctx=this.ctx,this._afterAll.push(b),this.emit("afterAll",b),this},d.prototype.beforeEach=function(a){if(this.pending)return this;var b=new j('"before each" hook',a);return b.parent=this,b.timeout(this.timeout()),b.slow(this.slow()),b.ctx=this.ctx,this._beforeEach.push(b),this.emit("beforeEach",b),this},d.prototype.afterEach=function(a){if(this.pending)return this;var b=new j('"after each" hook',a);return b.parent=this,b.timeout(this.timeout()),b.slow(this.slow()),b.ctx=this.ctx,this._afterEach.push(b),this.emit("afterEach",b),this},d.prototype.addSuite=function(a){return a.parent=this,a.timeout(this.timeout()),a.slow(this.slow()),a.bail(this.bail()),this.suites.push(a),this.emit("suite",a),this},d.prototype.addTest=function(a){return a.parent=this,a.timeout(this.timeout()),a.slow(this.slow()),a.ctx=this.ctx,this.tests.push(a),this.emit("test",a),this},d.prototype.fullTitle=function(){if(this.parent){var a=this.parent.fullTitle();if(a)return a+" "+this.title}return this.title},d.prototype.total=function(){return i.reduce(this.suites,function(a,b){return a+b.total()},0)+this.tests.length},d.prototype.eachTest=function(a){return i.forEach(this.tests,a),i.forEach(this.suites,function(b){b.eachTest(a)}),this}}),a.register("test.js",function(a,b,c){function d(a,b){f.call(this,a,b),this.pending=!b,this.type="test"}function e(){}var f=c("./runnable");a.exports=d,e.prototype=f.prototype,d.prototype=new e,d.prototype.constructor=d}),a.register("utils.js",function(a,b,c){function d(a){return!~j.indexOf(a)}function e(a){return a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\/\/(.*)/gm,'<span class="comment">//$1</span>').replace(/('.*?')/gm,'<span class="string">$1</span>').replace(/(\d+\.\d+)/gm,'<span class="number">$1</span>').replace(/(\d+)/gm,'<span class="number">$1</span>').replace(/\bnew *(\w+)/gm,'<span class="keyword">new</span> <span class="init">$1</span>').replace(/\b(function|new|throw|return|var|if|else)\b/gm,'<span class="keyword">$1</span>')}var f=c("browser/fs"),g=c("browser/path"),h=g.join,i=c("browser/debug")("mocha:watch"),j=["node_modules",".git"];b.escape=function(a){return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},b.forEach=function(a,b,c){for(var d=0,e=a.length;e>d;d++)b.call(c,a[d],d)},b.indexOf=function(a,b,c){for(var d=c||0,e=a.length;e>d;d++)if(a[d]===b)return d;return-1},b.reduce=function(a,b,c){for(var d=c,e=0,f=a.length;f>e;e++)d=b(d,a[e],e,a);return d},b.filter=function(a,b){for(var c=[],d=0,e=a.length;e>d;d++){var f=a[d];b(f,d,a)&&c.push(f)}return c},b.keys=Object.keys||function(a){var b=[],c=Object.prototype.hasOwnProperty;for(var d in a)c.call(a,d)&&b.push(d);return b},b.watch=function(a,b){var c={interval:100};a.forEach(function(a){i("file %s",a),f.watchFile(a,c,function(c,d){d.mtime<c.mtime&&b(a)})})},b.files=function(a,c){return c=c||[],f.readdirSync(a).filter(d).forEach(function(d){d=h(a,d),f.statSync(d).isDirectory()?b.files(d,c):d.match(/\.(js|coffee)$/)&&c.push(d)}),c},b.slug=function(a){return a.toLowerCase().replace(/ +/g,"-").replace(/[^-\w]/g,"")},b.clean=function(a){a=a.replace(/^function *\(.*\) *{/,"").replace(/\s+\}$/,"");var c=a.match(/^\n?( *)/)[1].length,d=new RegExp("^ {"+c+"}","gm");return a=a.replace(d,""),b.trim(a)},b.escapeRegexp=function(a){return a.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},b.trim=function(a){return a.replace(/^\s+|\s+$/g,"")},b.parseQuery=function(a){return b.reduce(a.replace("?","").split("&"),function(a,b){var c=b.indexOf("="),d=b.slice(0,c),e=b.slice(++c);return a[d]=decodeURIComponent(e),a},{})},b.highlightTags=function(a){for(var b=document.getElementsByTagName(a),c=0,d=b.length;d>c;++c)b[c].innerHTML=e(b[c].innerHTML)}}),process={},process.exit=function(){},process.stdout={},global=window,process.nextTick=function(){if(window.ActiveXObject||!window.postMessage)return function(a){a()};var a=[],b="mocha-zero-timeout";return window.addEventListener("message",function(c){c.source==window&&c.data==b&&(c.stopPropagation&&c.stopPropagation(),a.length&&a.shift()())},!0),function(c){a.push(c),window.postMessage(b,"*")}}(),process.removeListener=function(a){"uncaughtException"==a&&(window.onerror=null)},process.on=function(a,b){"uncaughtException"==a&&(window.onerror=function(a,c,d){b(new Error(a+" ("+c+":"+d+")"))})},function(){var b=window.Mocha=a("mocha"),c=window.mocha=new b({reporter:"html"});c.ui=function(a){return b.prototype.ui.call(this,a),this.suite.emit("pre-require",window,null,this),this},c.setup=function(a){"string"==typeof a&&(a={ui:a});for(var b in a)this[b](a[b]);return this},c.run=function(a){c.options,c.globals("location");var d=b.utils.parseQuery(window.location.search||"");return d.grep&&c.grep(d.grep),d.invert&&c.invert(),b.prototype.run.call(c,function(){b.utils.highlightTags("code"),a&&a()})}}()}();