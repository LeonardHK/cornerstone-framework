<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>widget-spinner.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/RangeInput.html">RangeInput</a></li>
            
                <li><a href="..&#x2F;classes/Touch.html">Touch</a></li>
            
                <li><a href="..&#x2F;classes/Widget.html">Widget</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: widget-spinner.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;&#x2F;fgnass.github.com&#x2F;spin.js#v1.2.5
(function(window, document, undefined) {

    &#x2F;**
     * Copyright (c) 2011 Felix Gnass [fgnass at neteye dot de]
     * Licensed under the MIT license
     *&#x2F;

    var prefixes = [&#x27;webkit&#x27;, &#x27;Moz&#x27;, &#x27;ms&#x27;, &#x27;O&#x27;]; &#x2F;* Vendor prefixes *&#x2F;
    var animations = {}; &#x2F;* Animation rules keyed by their name *&#x2F;
    var useCssAnimations;

    &#x2F;**
     * Utility function to create elements. If no tag name is given,
     * a DIV is created. Optionally properties can be passed.
     *&#x2F;
    function createEl(tag, prop) {
        var el = document.createElement(tag || &#x27;div&#x27;);
        var n;

        for(n in prop) {
            el[n] = prop[n];
        }
        return el;
    }

    &#x2F;**
     * Appends children and returns the parent.
     *&#x2F;
    function ins(parent &#x2F;* child1, child2, ...*&#x2F;) {
        for (var i=1, n=arguments.length; i&lt;n; i++) {
            parent.appendChild(arguments[i]);
        }
        return parent;
    }

    &#x2F;**
     * Insert a new stylesheet to hold the @keyframe or VML rules.
     *&#x2F;
    var sheet = function() {
        var el = createEl(&#x27;style&#x27;);
        ins(document.getElementsByTagName(&#x27;head&#x27;)[0], el);
        return el.sheet || el.styleSheet;
    }();

    &#x2F;**
     * Creates an opacity keyframe animation rule and returns its name.
     * Since most mobile Webkits have timing issues with animation-delay,
     * we create separate rules for each line&#x2F;segment.
     *&#x2F;
    function addAnimation(alpha, trail, i, lines) {
        var name = [&#x27;opacity&#x27;, trail, ~~(alpha*100), i, lines].join(&#x27;-&#x27;);
        var start = 0.01 + i&#x2F;lines*100;
        var z = Math.max(1-(1-alpha)&#x2F;trail*(100-start) , alpha);
        var prefix = useCssAnimations.substring(0, useCssAnimations.indexOf(&#x27;Animation&#x27;)).toLowerCase();
        var pre = prefix &amp;&amp; &#x27;-&#x27;+prefix+&#x27;-&#x27; || &#x27;&#x27;;

        if (!animations[name]) {
            sheet.insertRule(
                &#x27;@&#x27; + pre + &#x27;keyframes &#x27; + name + &#x27;{&#x27; +
                    &#x27;0%{opacity:&#x27;+z+&#x27;}&#x27; +
                    start + &#x27;%{opacity:&#x27;+ alpha + &#x27;}&#x27; +
                    (start+0.01) + &#x27;%{opacity:1}&#x27; +
                    (start+trail)%100 + &#x27;%{opacity:&#x27;+ alpha + &#x27;}&#x27; +
                    &#x27;100%{opacity:&#x27;+ z + &#x27;}&#x27; +
                    &#x27;}&#x27;, 0);
            animations[name] = 1;
        }
        return name;
    }

    &#x2F;**
     * Tries various vendor prefixes and returns the first supported property.
     **&#x2F;
    function vendor(el, prop) {
        var s = el.style;
        var pp;
        var i;

        if(s[prop] !== undefined) return prop;
        prop = prop.charAt(0).toUpperCase() + prop.slice(1);
        for(i=0; i&lt;prefixes.length; i++) {
            pp = prefixes[i]+prop;
            if(s[pp] !== undefined) return pp;
        }
    }

    &#x2F;**
     * Sets multiple style properties at once.
     *&#x2F;
    function css(el, prop) {
        for (var n in prop) {
            el.style[vendor(el, n)||n] = prop[n];
        }
        return el;
    }

    &#x2F;**
     * Fills in default values.
     *&#x2F;
    function merge(obj) {
        for (var i=1; i &lt; arguments.length; i++) {
            var def = arguments[i];
            for (var n in def) {
                if (obj[n] === undefined) obj[n] = def[n];
            }
        }
        return obj;
    }

    &#x2F;**
     * Returns the absolute page-offset of the given element.
     *&#x2F;
    function pos(el) {
        var o = {x:el.offsetLeft, y:el.offsetTop};
        while((el = el.offsetParent)) {
            o.x+=el.offsetLeft;
            o.y+=el.offsetTop;
        }
        return o;
    }

    var defaults = {
        lines: 12,            &#x2F;&#x2F; The number of lines to draw
        length: 7,            &#x2F;&#x2F; The length of each line
        width: 5,             &#x2F;&#x2F; The line thickness
        radius: 10,           &#x2F;&#x2F; The radius of the inner circle
        rotate: 0,            &#x2F;&#x2F; rotation offset
        color: &#x27;#000&#x27;,        &#x2F;&#x2F; #rgb or #rrggbb
        speed: 1,             &#x2F;&#x2F; Rounds per second
        trail: 100,           &#x2F;&#x2F; Afterglow percentage
        opacity: 1&#x2F;4,         &#x2F;&#x2F; Opacity of the lines
        fps: 20,              &#x2F;&#x2F; Frames per second when using setTimeout()
        zIndex: 2e9,          &#x2F;&#x2F; Use a high z-index by default
        className: &#x27;spinner&#x27;, &#x2F;&#x2F; CSS class to assign to the element
        top: &#x27;auto&#x27;,          &#x2F;&#x2F; center vertically
        left: &#x27;auto&#x27;          &#x2F;&#x2F; center horizontally
    };

    &#x2F;** The constructor *&#x2F;
    var Spinner = function Spinner(o) {
        if (!this.spin) return new Spinner(o);
        this.opts = merge(o || {}, Spinner.defaults, defaults);
    };

    Spinner.defaults = {};
    merge(Spinner.prototype, {
        spin: function(target) {
            this.stop();
            var self = this;
            var o = self.opts;
            var el = self.el = css(createEl(0, {className: o.className}), {position: &#x27;relative&#x27;, zIndex: o.zIndex});
            var mid = o.radius+o.length+o.width;
            var ep; &#x2F;&#x2F; element position
            var tp; &#x2F;&#x2F; target position

            if (target) {
                target.insertBefore(el, target.firstChild||null);
                tp = pos(target);
                ep = pos(el);
                css(el, {
                    left: (o.left == &#x27;auto&#x27; ? tp.x-ep.x + (target.offsetWidth &gt;&gt; 1) : o.left+mid) + &#x27;px&#x27;,
                    top: (o.top == &#x27;auto&#x27; ? tp.y-ep.y + (target.offsetHeight &gt;&gt; 1) : o.top+mid)  + &#x27;px&#x27;
                });
            }

            el.setAttribute(&#x27;aria-role&#x27;, &#x27;progressbar&#x27;);
            self.lines(el, self.opts);

            if (!useCssAnimations) {
                &#x2F;&#x2F; No CSS animation support, use setTimeout() instead
                var i = 0;
                var fps = o.fps;
                var f = fps&#x2F;o.speed;
                var ostep = (1-o.opacity)&#x2F;(f*o.trail &#x2F; 100);
                var astep = f&#x2F;o.lines;

                !function anim() {
                    i++;
                    for (var s=o.lines; s; s--) {
                        var alpha = Math.max(1-(i+s*astep)%f * ostep, o.opacity);
                        self.opacity(el, o.lines-s, alpha, o);
                    }
                    self.timeout = self.el &amp;&amp; setTimeout(anim, ~~(1000&#x2F;fps));
                }();
            }
            return self;
        },
        stop: function() {
            var el = this.el;
            if (el) {
                clearTimeout(this.timeout);
                if (el.parentNode) el.parentNode.removeChild(el);
                this.el = undefined;
            }
            return this;
        },
        lines: function(el, o) {
            var i = 0;
            var seg;

            function fill(color, shadow) {
                return css(createEl(), {
                    position: &#x27;absolute&#x27;,
                    width: (o.length+o.width) + &#x27;px&#x27;,
                    height: o.width + &#x27;px&#x27;,
                    background: color,
                    boxShadow: shadow,
                    transformOrigin: &#x27;left&#x27;,
                    transform: &#x27;rotate(&#x27; + ~~(360&#x2F;o.lines*i+o.rotate) + &#x27;deg) translate(&#x27; + o.radius+&#x27;px&#x27; +&#x27;,0)&#x27;,
                    borderRadius: (o.width&gt;&gt;1) + &#x27;px&#x27;
                });
            }
            for (; i &lt; o.lines; i++) {
                seg = css(createEl(), {
                    position: &#x27;absolute&#x27;,
                    top: 1+~(o.width&#x2F;2) + &#x27;px&#x27;,
                    transform: o.hwaccel ? &#x27;translate3d(0,0,0)&#x27; : &#x27;&#x27;,
                    opacity: o.opacity,
                    animation: useCssAnimations &amp;&amp; addAnimation(o.opacity, o.trail, i, o.lines) + &#x27; &#x27; + 1&#x2F;o.speed + &#x27;s linear infinite&#x27;
                });
                if (o.shadow) ins(seg, css(fill(&#x27;#000&#x27;, &#x27;0 0 4px &#x27; + &#x27;#000&#x27;), {top: 2+&#x27;px&#x27;}));
                ins(el, ins(seg, fill(o.color, &#x27;0 0 1px rgba(0,0,0,.1)&#x27;)));
            }
            return el;
        },
        opacity: function(el, i, val) {
            if (i &lt; el.childNodes.length) el.childNodes[i].style.opacity = val;
        }
    });

    window.Spinner = Spinner;

})(window, document);

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
