/*
    Cornerstone Framework v0.9.1

    COPYRIGHT(C) 2012 BY SKTELECOM CO., LTD. ALL RIGHTS RESERVED.
    Released under the Apache License, Version 2.0
*/
!function(a,b,c){"function"==typeof define&&define.amd?define(["backbone","underscore","jquery"],function(d,e,f){return c(f,a,b),d.View.extend({render:function(){return this.$el.rangeinput(this.options),this}})}):c(a.jQuery,a,b)}(this,document,function(a,b,c,d){function f(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c}function g(a,b){var c=parseInt(a.css(b),10);if(c)return c;var d=a[0].currentStyle;return d&&d.width&&parseInt(d.width,10)}function h(a){var b=a.data("events");return b&&b.onSlide}function i(a,c){function i(b,g,h,i){if(h===d?h=g/o*v:i&&(h-=c.min),w&&(h=Math.round(h/w)*w),(g===d||w)&&(g=h*o/v),isNaN(h))return q;g=Math.max(0,Math.min(g,o)),h=g/o*v,(i||!l)&&(h+=c.min),l&&(i?g=o-g:h=c.max-h),h=f(h,x);var j="click"==b.type;if(z&&m!==d&&!j&&(b.type="onSlide",y.trigger(b,[h,g]),b.isDefaultPrevented()))return q;var k=j?c.speed:0,n=j?function(){b.type="change",y.trigger(b,[h]),q.$input.trigger(e=$.Event("end.cs.rangeInput"))}:null;return l?(t.animate({top:g},k,n),c.progress&&u.animate({height:o-g+t.height()/2},k)):navigator.userAgent.match("Android|iPhone")?t[0].style.WebkitTransform="translate3d("+g+"px,0,0)":(t.animate({left:g},k,n),c.progress&&u.animate({width:g+t.width()/2},k)),m=h,p=g,navigator.userAgent.match("Android")||this.insertingValue||a[0].value==h||(this.insertingValue=!0,a[0].value=h,this.insertingValue=!1),q.$input=a,q.inputValue=m,q.$input.trigger(e=$.Event("move.cs.rangeInput")),q}function j(){l=c.vertical||g(s,"height")>g(s,"width"),l?(o=g(s,"height")-g(t,"height"),n=s.offset().top+o):(o=g(s,"width")-g(t,"width"),n=s.offset().left)}function k(){j(),q.setValue(c.value!==d?c.value:c.min)}var l,m,n,o,p,q=this,r=c.css,s=$("<div><div></div><button></button></div>").data("rangeinput",q);a.before(s);var t=s.addClass(r.slider).find("button").addClass(r.handle),u=s.find("div").addClass(r.progress);$.each("min,max,step,value".split(","),function(b,d){var e=a.attr(d);parseFloat(e)&&(c[d]=parseFloat(e,10))});var v=c.max-c.min,w="any"==c.step?0:c.step,x=c.precision;x===d&&(x=w.toString().split("."),x=2===x.length?x[1].length:0),"range"==a.attr("type")&&a.addClass("figure inline form-control").val(c.value).attr("type","tel").attr("data-orig-type","range"),a.addClass(r.input),c.inputShow?(s.addClass("inline"),s.css({width:s.width()-2*a.width(),marginRight:.25*a.width(),"float":"left"})):a.css({display:"none"});var y=$(q).add(a),z=!0;$.extend(q,{getValue:function(){return m},setValue:function(a,b){return j(),i(b||$.Event("api"),d,a,!0)},getConf:function(){return c},getProgress:function(){return u},getHandle:function(){return t},getInput:function(){return a},step:function(a,b){b=b||$.Event();var d="any"==c.step?1:c.step;q.setValue(m+d*(a||1),b)},stepUp:function(a){return q.step(a||1)},stepDown:function(a){return q.step(-a||-1)}}),$.each("onSlide,change".split(","),function(a,b){$.isFunction(c[b])&&$(q).on(b,c[b]),q[b]=function(a){return a&&$(q).on(b,a),q}}),t.drag({drag:!1}).on("dragStart",function(){j(),z=h($(q))||h(a),q.$input.trigger(e=$.Event("start.cs.rangeInput"))}).on("drag",function(b,c,d){var e=0;return a.is(":disabled")?!1:(e=isNaN(this.prevX)?d:d>this.prevX?d-this.prevX:this.prevX-d,navigator.userAgent.match("Android")&&10>e?i(b,l?c:d):i(b,l?c:d),this.prevX=d,void 0)}).on("dragEnd",function(a){q.$input.val(q.inputValue),a.isDefaultPrevented()||(a.type="change",y.trigger(a,[m])),q.$input.trigger(a=$.Event("end.cs.rangeInput"))}).click(function(a){return a.preventDefault()}),s.click(function(b){if(a.is(":disabled")||b.target==t[0])return b.preventDefault();j();var c=l?t.height()/2:t.width()/2;q.$input.trigger($.Event("start.cs.rangeInput")),i(b,l?o-n-c+b.pageY:b.pageX-n-c),q.$input.val(q.inputValue)}),c.keyboard&&a.keydown(function(b){if(!a.attr("readonly")){var c=b.keyCode,d=-1!=$([75,76,38,33,39]).index(c),e=-1!=$([74,72,40,34,37]).index(c);return!d&&!e||b.shiftKey||b.altKey||b.ctrlKey?void 0:(d?q.step(33==c?10:1,b):e&&q.step(34==c?-10:-1,b),b.preventDefault())}}),a.on("change",function(a){if("none"===$(this).css("display"))return!1;var b=$(this).val();b!==m&&q.setValue(b,a)}),$.extend(a[0],{stepUp:q.stepUp,stepDown:q.stepDown}),k(),o||$(b).load(k)}var j={min:0,max:100,step:"any",steps:0,value:0,precision:d,vertical:0,keyboard:!1,progress:!1,speed:100,inputShow:!1,css:{input:"range",slider:"slider",progress:"slider-bar",handle:"slide-handle"}};$.expr[":"].range=function(a){var b=a.getAttribute("type");return b&&"range"==b||!!$(a).filter("input").data("rangeinput")},$.fn.rangeinput=function(a){if(this.data("rangeinput"))return this;a=$.extend(!0,{},j,a);var b;return this.each(function(){var c=new i($(this),$.extend(!0,{},a)),d=c.getInput().data("rangeinput",c);b=b?b.add(d):d}),b?b:this},$(function(){$("[data-plugin^='rangeinput']").each(function(){var a=$(this).data("rangeOptions");$(this).rangeinput(a)})})});