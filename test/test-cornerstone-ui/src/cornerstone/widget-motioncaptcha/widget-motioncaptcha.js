/*
    Cornerstone Framework v0.9.1

    COPYRIGHT(C) 2012 BY SKTELECOM CO., LTD. ALL RIGHTS RESERVED.
    Released under the Apache License, Version 2.0
*/
!function(a,b,c){"function"==typeof define&&define.amd?define(["backbone","underscore","jquery"],function(d,e,f){return c(f,a,b),d.View.extend({render:function(){return this.$el.motioncaptcha(this.options),this}})}):c(a.jQuery,a,b)}(window,document,function(a,b){jQuery.fn.motioncaptcha||function(a){function c(a){this.init(a)}function d(a,b){this.X=a,this.Y=b}function f(a,b){return new d(a,b)}function g(a,b,c,d){this.X=a,this.Y=b,this.Width=c,this.Height=d}function h(a,b){this.Name=a,this.Points=k(b,v);var c=l(this.Points);this.Points=m(this.Points,-c),this.Points=n(this.Points,w),this.Points=o(this.Points,x),this.Vector=p(this.Points)}function i(a,b){this.Name=a,this.Score=b}function j(){this.Templates=[],this.Templates.push(new h("triangle",[f(137,139),f(135,141),f(133,144),f(132,146),f(130,149),f(128,151),f(126,155),f(123,160),f(120,166),f(116,171),f(112,177),f(107,183),f(102,188),f(100,191),f(95,195),f(90,199),f(86,203),f(82,206),f(80,209),f(75,213),f(73,213),f(70,216),f(67,219),f(64,221),f(61,223),f(60,225),f(62,226),f(65,225),f(67,226),f(74,226),f(77,227),f(85,229),f(91,230),f(99,231),f(108,232),f(116,233),f(125,233),f(134,234),f(145,233),f(153,232),f(160,233),f(170,234),f(177,235),f(179,236),f(186,237),f(193,238),f(198,239),f(200,237),f(202,239),f(204,238),f(206,234),f(205,230),f(202,222),f(197,216),f(192,207),f(186,198),f(179,189),f(174,183),f(170,178),f(164,171),f(161,168),f(154,160),f(148,155),f(143,150),f(138,148),f(136,148)])),this.Templates.push(new h("x",[f(87,142),f(89,145),f(91,148),f(93,151),f(96,155),f(98,157),f(100,160),f(102,162),f(106,167),f(108,169),f(110,171),f(115,177),f(119,183),f(123,189),f(127,193),f(129,196),f(133,200),f(137,206),f(140,209),f(143,212),f(146,215),f(151,220),f(153,222),f(155,223),f(157,225),f(158,223),f(157,218),f(155,211),f(154,208),f(152,200),f(150,189),f(148,179),f(147,170),f(147,158),f(147,148),f(147,141),f(147,136),f(144,135),f(142,137),f(140,139),f(135,145),f(131,152),f(124,163),f(116,177),f(108,191),f(100,206),f(94,217),f(91,222),f(89,225),f(87,226),f(87,224)])),this.Templates.push(new h("rectangle",[f(78,149),f(78,153),f(78,157),f(78,160),f(79,162),f(79,164),f(79,167),f(79,169),f(79,173),f(79,178),f(79,183),f(80,189),f(80,193),f(80,198),f(80,202),f(81,208),f(81,210),f(81,216),f(82,222),f(82,224),f(82,227),f(83,229),f(83,231),f(85,230),f(88,232),f(90,233),f(92,232),f(94,233),f(99,232),f(102,233),f(106,233),f(109,234),f(117,235),f(123,236),f(126,236),f(135,237),f(142,238),f(145,238),f(152,238),f(154,239),f(165,238),f(174,237),f(179,236),f(186,235),f(191,235),f(195,233),f(197,233),f(200,233),f(201,235),f(201,233),f(199,231),f(198,226),f(198,220),f(196,207),f(195,195),f(195,181),f(195,173),f(195,163),f(194,155),f(192,145),f(192,143),f(192,138),f(191,135),f(191,133),f(191,130),f(190,128),f(188,129),f(186,129),f(181,132),f(173,131),f(162,131),f(151,132),f(149,132),f(138,132),f(136,132),f(122,131),f(120,131),f(109,130),f(107,130),f(90,132),f(81,133),f(76,133)])),this.Templates.push(new h("circle",[f(127,141),f(124,140),f(120,139),f(118,139),f(116,139),f(111,140),f(109,141),f(104,144),f(100,147),f(96,152),f(93,157),f(90,163),f(87,169),f(85,175),f(83,181),f(82,190),f(82,195),f(83,200),f(84,205),f(88,213),f(91,216),f(96,219),f(103,222),f(108,224),f(111,224),f(120,224),f(133,223),f(142,222),f(152,218),f(160,214),f(167,210),f(173,204),f(178,198),f(179,196),f(182,188),f(182,177),f(178,167),f(170,150),f(163,138),f(152,130),f(143,129),f(140,131),f(129,136),f(126,139)])),this.Templates.push(new h("check",[f(91,185),f(93,185),f(95,185),f(97,185),f(100,188),f(102,189),f(104,190),f(106,193),f(108,195),f(110,198),f(112,201),f(114,204),f(115,207),f(117,210),f(118,212),f(120,214),f(121,217),f(122,219),f(123,222),f(124,224),f(126,226),f(127,229),f(129,231),f(130,233),f(129,231),f(129,228),f(129,226),f(129,224),f(129,221),f(129,218),f(129,212),f(129,208),f(130,198),f(132,189),f(134,182),f(137,173),f(143,164),f(147,157),f(151,151),f(155,144),f(161,137),f(165,131),f(171,122),f(174,118),f(176,114),f(177,112),f(177,114),f(175,116),f(173,118)])),this.Templates.push(new h("caret",[f(79,245),f(79,242),f(79,239),f(80,237),f(80,234),f(81,232),f(82,230),f(84,224),f(86,220),f(86,218),f(87,216),f(88,213),f(90,207),f(91,202),f(92,200),f(93,194),f(94,192),f(96,189),f(97,186),f(100,179),f(102,173),f(105,165),f(107,160),f(109,158),f(112,151),f(115,144),f(117,139),f(119,136),f(119,134),f(120,132),f(121,129),f(122,127),f(124,125),f(126,124),f(129,125),f(131,127),f(132,130),f(136,139),f(141,154),f(145,166),f(151,182),f(156,193),f(157,196),f(161,209),f(162,211),f(167,223),f(169,229),f(170,231),f(173,237),f(176,242),f(177,244),f(179,250),f(181,255),f(182,257)])),this.Templates.push(new h("zigzag",[f(307,216),f(333,186),f(356,215),f(375,186),f(399,216),f(418,186)])),this.Templates.push(new h("arrow",[f(68,222),f(70,220),f(73,218),f(75,217),f(77,215),f(80,213),f(82,212),f(84,210),f(87,209),f(89,208),f(92,206),f(95,204),f(101,201),f(106,198),f(112,194),f(118,191),f(124,187),f(127,186),f(132,183),f(138,181),f(141,180),f(146,178),f(154,173),f(159,171),f(161,170),f(166,167),f(168,167),f(171,166),f(174,164),f(177,162),f(180,160),f(182,158),f(183,156),f(181,154),f(178,153),f(171,153),f(164,153),f(160,153),f(150,154),f(147,155),f(141,157),f(137,158),f(135,158),f(137,158),f(140,157),f(143,156),f(151,154),f(160,152),f(170,149),f(179,147),f(185,145),f(192,144),f(196,144),f(198,144),f(200,144),f(201,147),f(199,149),f(194,157),f(191,160),f(186,167),f(180,176),f(177,179),f(171,187),f(169,189),f(165,194),f(164,196)])),this.Templates.push(new h("leftbracket",[f(140,124),f(138,123),f(135,122),f(133,123),f(130,123),f(128,124),f(125,125),f(122,124),f(120,124),f(118,124),f(116,125),f(113,125),f(111,125),f(108,124),f(106,125),f(104,125),f(102,124),f(100,123),f(98,123),f(95,124),f(93,123),f(90,124),f(88,124),f(85,125),f(83,126),f(81,127),f(81,129),f(82,131),f(82,134),f(83,138),f(84,141),f(84,144),f(85,148),f(85,151),f(86,156),f(86,160),f(86,164),f(86,168),f(87,171),f(87,175),f(87,179),f(87,182),f(87,186),f(88,188),f(88,195),f(88,198),f(88,201),f(88,207),f(89,211),f(89,213),f(89,217),f(89,222),f(88,225),f(88,229),f(88,231),f(88,233),f(88,235),f(89,237),f(89,240),f(89,242),f(91,241),f(94,241),f(96,240),f(98,239),f(105,240),f(109,240),f(113,239),f(116,240),f(121,239),f(130,240),f(136,237),f(139,237),f(144,238),f(151,237),f(157,236),f(159,237)])),this.Templates.push(new h("rightbracket",[f(112,138),f(112,136),f(115,136),f(118,137),f(120,136),f(123,136),f(125,136),f(128,136),f(131,136),f(134,135),f(137,135),f(140,134),f(143,133),f(145,132),f(147,132),f(149,132),f(152,132),f(153,134),f(154,137),f(155,141),f(156,144),f(157,152),f(158,161),f(160,170),f(162,182),f(164,192),f(166,200),f(167,209),f(168,214),f(168,216),f(169,221),f(169,223),f(169,228),f(169,231),f(166,233),f(164,234),f(161,235),f(155,236),f(147,235),f(140,233),f(131,233),f(124,233),f(117,235),f(114,238),f(112,238)])),this.Templates.push(new h("v",[f(89,164),f(90,162),f(92,162),f(94,164),f(95,166),f(96,169),f(97,171),f(99,175),f(101,178),f(103,182),f(106,189),f(108,194),f(111,199),f(114,204),f(117,209),f(119,214),f(122,218),f(124,222),f(126,225),f(128,228),f(130,229),f(133,233),f(134,236),f(136,239),f(138,240),f(139,242),f(140,244),f(142,242),f(142,240),f(142,237),f(143,235),f(143,233),f(145,229),f(146,226),f(148,217),f(149,208),f(149,205),f(151,196),f(151,193),f(153,182),f(155,172),f(157,165),f(159,160),f(162,155),f(164,150),f(165,148),f(166,146)])),this.Templates.push(new h("delete",[f(123,129),f(123,131),f(124,133),f(125,136),f(127,140),f(129,142),f(133,148),f(137,154),f(143,158),f(145,161),f(148,164),f(153,170),f(158,176),f(160,178),f(164,183),f(168,188),f(171,191),f(175,196),f(178,200),f(180,202),f(181,205),f(184,208),f(186,210),f(187,213),f(188,215),f(186,212),f(183,211),f(177,208),f(169,206),f(162,205),f(154,207),f(145,209),f(137,210),f(129,214),f(122,217),f(118,218),f(111,221),f(109,222),f(110,219),f(112,217),f(118,209),f(120,207),f(128,196),f(135,187),f(138,183),f(148,167),f(157,153),f(163,145),f(165,142),f(172,133),f(177,127),f(179,127),f(180,125)])),this.Templates.push(new h("star",[f(75,250),f(75,247),f(77,244),f(78,242),f(79,239),f(80,237),f(82,234),f(82,232),f(84,229),f(85,225),f(87,222),f(88,219),f(89,216),f(91,212),f(92,208),f(94,204),f(95,201),f(96,196),f(97,194),f(98,191),f(100,185),f(102,178),f(104,173),f(104,171),f(105,164),f(106,158),f(107,156),f(107,152),f(108,145),f(109,141),f(110,139),f(112,133),f(113,131),f(116,127),f(117,125),f(119,122),f(121,121),f(123,120),f(125,122),f(125,125),f(127,130),f(128,133),f(131,143),f(136,153),f(140,163),f(144,172),f(145,175),f(151,189),f(156,201),f(161,213),f(166,225),f(169,233),f(171,236),f(174,243),f(177,247),f(178,249),f(179,251),f(180,253),f(180,255),f(179,257),f(177,257),f(174,255),f(169,250),f(164,247),f(160,245),f(149,238),f(138,230),f(127,221),f(124,220),f(112,212),f(110,210),f(96,201),f(84,195),f(74,190),f(64,182),f(55,175),f(51,172),f(49,170),f(51,169),f(56,169),f(66,169),f(78,168),f(92,166),f(107,164),f(123,161),f(140,162),f(156,162),f(171,160),f(173,160),f(186,160),f(195,160),f(198,161),f(203,163),f(208,163),f(206,164),f(200,167),f(187,172),f(174,179),f(172,181),f(153,192),f(137,201),f(123,211),f(112,220),f(99,229),f(90,237),f(80,244),f(73,250),f(69,254),f(69,252)])),this.Templates.push(new h("pigtail",[f(81,219),f(84,218),f(86,220),f(88,220),f(90,220),f(92,219),f(95,220),f(97,219),f(99,220),f(102,218),f(105,217),f(107,216),f(110,216),f(113,214),f(116,212),f(118,210),f(121,208),f(124,205),f(126,202),f(129,199),f(132,196),f(136,191),f(139,187),f(142,182),f(144,179),f(146,174),f(148,170),f(149,168),f(151,162),f(152,160),f(152,157),f(152,155),f(152,151),f(152,149),f(152,146),f(149,142),f(148,139),f(145,137),f(141,135),f(139,135),f(134,136),f(130,140),f(128,142),f(126,145),f(122,150),f(119,158),f(117,163),f(115,170),f(114,175),f(117,184),f(120,190),f(125,199),f(129,203),f(133,208),f(138,213),f(145,215),f(155,218),f(164,219),f(166,219),f(177,219),f(182,218),f(192,216),f(196,213),f(199,212),f(201,211)])),this.Recognize=function(a){var b,c,d,e=+1/0,f=0;for(a=k(a,v),b=l(a),a=m(a,-b),d=p(a),c=0;c<this.Templates.length;c++){var g=q(this.Templates[c].Vector,d);e>g&&(e=g,f=c)}return new i(this.Templates[f].Name,1/e)}}function k(a,b){var c,d=t(a)/(b-1),e=0,g=new Array(a[0]);for(c=1;c<a.length;c++){var h=u(a[c-1],a[c]);if(e+h>=d){var i=a[c-1].X+(d-e)/h*(a[c].X-a[c-1].X),j=a[c-1].Y+(d-e)/h*(a[c].Y-a[c-1].Y),k=f(i,j);g[g.length]=k,a.splice(c,0,k),e=0}else e+=h}return g.length==b-1&&(g[g.length]=f(a[a.length-1].X,a[a.length-1].Y)),g}function l(a){var b=r(a);return Math.atan2(b.Y-a[0].Y,b.X-a[0].X)}function m(a,b){var c,d=r(a),e=Math.cos(b),g=Math.sin(b),h=[];for(c=0;c<a.length;c++){var i=(a[c].X-d.X)*e-(a[c].Y-d.Y)*g+d.X,j=(a[c].X-d.X)*g+(a[c].Y-d.Y)*e+d.Y;h[h.length]=f(i,j)}return h}function n(a,b){var c,d=s(a),e=[];for(c=0;c<a.length;c++){var g=a[c].X*(b/d.Width),h=a[c].Y*(b/d.Height);e[e.length]=f(g,h)}return e}function o(a,b){var c,d=r(a),e=[];for(c=0;c<a.length;c++){var g=a[c].X+b.X-d.X,h=a[c].Y+b.Y-d.Y;e[e.length]=f(g,h)}return e}function p(a){var b,c,d=0,e=[];for(b=0;b<a.length;b++)e[e.length]=a[b].X,e[e.length]=a[b].Y,d+=a[b].X*a[b].X+a[b].Y*a[b].Y;for(c=Math.sqrt(d),b=0;b<e.length;b++)e[b]/=c;return e}function q(a,b){var c,d,e=0,f=0;for(c=0;c<a.length;c+=2)e+=a[c]*b[c]+a[c+1]*b[c+1],f+=a[c]*b[c+1]-a[c+1]*b[c];return d=Math.atan(f/e),Math.acos(e*Math.cos(d)+f*Math.sin(d))}function r(a){var b,c=0,d=0;for(b=0;b<a.length;b++)c+=a[b].X,d+=a[b].Y;return c/=a.length,d/=a.length,f(c,d)}function s(a){var b,c=+1/0,d=-1/0,e=+1/0,f=-1/0;for(b=0;b<a.length;b++)a[b].X<c&&(c=a[b].X),a[b].X>d&&(d=a[b].X),a[b].Y<e&&(e=a[b].Y),a[b].Y>f&&(f=a[b].Y);return new g(c,e,d-c,f-e)}function t(a){var b,c=0;for(b=1;b<a.length;b++)c+=u(a[b-1],a[b]);return c}function u(a,b){var c=b.X-a.X,d=b.Y-a.Y;return Math.sqrt(c*c+d*d)}a.fn.motioncaptcha=function(d){return this.each(function(){function g(a){var b,c;return a.touches&&a.touches.length>0?(b=a.touches[0].pageX-m.offset().left+p,c=a.touches[0].pageY-m.offset().top+q):a.offsetX?(b=a.offsetX-p,c=a.offsetY-q):(b=a.pageX-m.offset().left-p,c=a.pageY-m.offset().top-q),[b,c]}var h=a.extend({},a.fn.motioncaptcha.defaults,d);h.actionId="#"+h.actionId.replace(/\#/g,""),h.canvasId="#"+h.canvasId.replace(/\#/g,""),h.divId="#"+h.divId.replace(/\#/g,""),h.submitId=h.submitId?"#"+h.submitId.replace(/\#/g,""):!1;var i,k=!1,l=(a("body"),a(this)),m=(a(h.divId),a(h.canvasId)),n=m.width(),o=m.height(),p=1*m.css("borderLeftWidth").replace("px",""),q=1*m.css("borderTopWidth").replace("px","");m[0].width=n,m[0].height=o;var r=m[0].getContext("2d");r.canvasWidth=n,r.canvasHeight=o,r.font=h.canvasFont,r.fillStyle=h.canvasTextColor,m.addClass(h.shapes[Math.floor(Math.random()*h.shapes.length)]);var s=!1,t=!1,u=[],v=new j;i=new c(r);var w=function(b){if(k)return!1;b.preventDefault();var c=g(b),d=c[0],h=c[1];return s=!0,t=!0,a("body").addClass("mc-noselect"),r.clearRect(0,0,n,o),i.strokeStart(d,h),m.removeClass("mc-invalid mc-valid"),u=[f(d,h)],m.trigger(e=a.Event("start.cs.motionCaptcha")),!1},x=function(b){if(t)return t=0;if(!k&&s){b.preventDefault();var c=g(b),d=c[0],h=c[1];u[u.length]=f(d,h),i.stroke(d,h),m.trigger(e=a.Event("move.cs.motionCaptcha"))}return!1},y=function(){if(!k&&s)if(s=!1,a("body").removeClass("mc-noselect"),u.length>=10){var b=v.Recognize(u);m.attr("class").match(b.Name)&&b.Score>.7?(k=1,setTimeout(i.destroy,500),m.addClass("mc-valid"),r.fillText(h.successMsg,10,24),m.trigger(e=a.Event("success.cs.motionCaptcha")),h.onSuccess(l,m,r)):(m.addClass("mc-invalid"),r.fillText(h.errorMsg,10,24),m.trigger(e=a.Event("fail.cs.motionCaptcha")),h.onError(l,m,r))}else m.addClass("mc-invalid"),r.fillText(h.errorMsg,10,24),m.trigger(e=a.Event("fail.cs.motionCaptcha")),h.onError(l,m,r);return m.trigger(e=a.Event("end.cs.motionCaptcha")),!1};"ontouchstart"in b||m.bind({mousedown:w,mousemove:x,mouseup:y}),m[0].addEventListener("touchstart",w,!1),m[0].addEventListener("touchmove",x,!1),m[0].addEventListener("touchend",y,!1),l.addClass(h.cssClass.replace(/\./,""))})},a.fn.motioncaptcha.defaults={actionId:"#mc-action",divId:"#mc",canvasId:"#mc-canvas",submitId:!1,cssClass:".mc-active",shapes:["triangle","x","rectangle","circle","check","caret","zigzag","arrow","leftbracket","rightbracket","v","delete","star","pigtail"],canvasFont:'15px "Lucida Grande"',canvasTextColor:"#111",errorMsg:"다시 시도해주세요.",successMsg:"성공!",noCanvasMsg:"Your browser doesn't support <canvas> - try Chrome, FF4, Safari or IE9.",label:"<p>Please draw the shape in the box to submit the form:</p>",onSuccess:function(b){var c=this,d=c.submitId?b.find(c.submitId):b.find("input[type=submit]:disabled");b.attr("action",a(c.actionId).val()),d.prop("disabled",!1)},onError:function(){}},c.prototype={ctx:null,X:null,Y:null,painters:null,interval:null,init:function(a){function b(){var a;for(c.ctx.lineWidth=e,c.ctx.strokeStyle="rgba("+f[0]+", "+f[1]+", "+f[2]+", "+.06+")",a=0;a<c.painters.length;a++)c.ctx.beginPath(),c.ctx.moveTo(c.painters[a].dx,c.painters[a].dy),c.painters[a].dx-=c.painters[a].ax=(c.painters[a].ax+(c.painters[a].dx-c.X)*c.painters[a].div)*c.painters[a].ease,c.painters[a].dy-=c.painters[a].ay=(c.painters[a].ay+(c.painters[a].dy-c.Y)*c.painters[a].div)*c.painters[a].ease,c.ctx.lineTo(c.painters[a].dx,c.painters[a].dy),c.ctx.stroke()}var c=this,d=navigator.userAgent.toLowerCase(),e=d.search("android")>-1||d.search("iphone")>-1?2:1,f=[0,0,0];this.ctx=a,this.ctx.globalCompositeOperation="source-over",this.X=this.ctx.canvasWidth/2,this.Y=this.ctx.canvasHeight/2,this.painters=[];for(var g=0;38>g;g++)this.painters.push({dx:this.ctx.canvasWidth/2,dy:this.ctx.canvasHeight/2,ax:0,ay:0,div:.1,ease:.18*Math.random()+.6});this.interval=setInterval(b,1e3/60)},destroy:function(){clearInterval(this.interval)},strokeStart:function(a,b){this.X=a,this.Y=b;for(var c=0;c<this.painters.length;c++)this.painters[c].dx=a,this.painters[c].dy=b;this.shouldDraw=!0},stroke:function(a,b){this.X=a,this.Y=b}};var v=64,w=250,x=f(0,0)}(jQuery)});