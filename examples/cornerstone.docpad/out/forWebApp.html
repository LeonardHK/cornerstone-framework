<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="./dist/lib/bootstrap/css/bootstrap.css" />
    <link rel="stylesheet" href="./dist/lib/bootstrap/css/bootstrap-responsive.css" />
    <link rel="stylesheet" href="./dist/ui/theme/white/css/cornerstone.css" />
    <style>  #customers
  #{
  #      font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
  #      width:100%;
  #      border-collapse:collapse;
  #}
  td, th 
  {
        font-size:1.2em;
        border:1px solid #98bf21;
        padding:3px 7px 2px 7px;
  }
  th 
  {
        font-size:1.4em;
        text-align:left;
        padding-top:5px;
        padding-bottom:4px;
        background-color:#A7C942;
        color:#fff;
  }
  tr.alt td 
  {
        color:#000;
  background-color:#EAF2D3;
  }
#  table {
#    width: 49%;
#    float: left;
#    height: 300px;
#    border: 1px solid black;
#    border-left: 0px;
#  }
  textarea {
        background-color:#A7C942;
  }</style>
    <script src="./dist/lib/jquery-1.8.1.min.js"></script>
    <script src="./dist/ui/widget-plugins.js"></script>
  </head>
  <body>
    <div class="navbar ico-txt">
      <div class="navbar-inner">
        <div class="container">
          <button class="btn btn-navbar" type="button" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar">
            </span>
            <span class="icon-bar">
            </span>
            <span class="icon-bar">
            </span>
          </button>
          <a class="brand" href="./index.html">
            Cornerstone
          </a>
          <div class="nav-collapse collapse">
            <ul class="nav pull-left">
              <li class="inactive" id="home">
                <a href="./index.html" title="home">
                  HOME
                </a>
              </li>
              <li class="inactive" id="toc">
                <a href="./toc.html" title="toc">
                  목차
                </a>
              </li>
              <li class="inactive" id="bytag">
                <a href="./bytag.html" title="bytag">
                  태그별모음
                </a>
              </li>
              <li class="inactive" id="bydate">
                <a href="./bydate.html" title="bydate">
                  작성순모음
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
    </div>
    <article class="page" typeof="sioc:page" about="/forWebApp">
      <div class="page-content" property="sioc:content">
  <hr>

<h1>1. Cornerstone Runtime 기본구조</h1>

<hr>

<h2>1.1 공통 Runtime 기본구조</h2>

<p><img src="./images/runtime1.png" alt="Cornerstone Runtime 메인 구조"></p>

<ul>
<li><p>Cornerstone Runtime은 크게 platform 별 Native Layer와 Java Script Layer의 2가지의 layer로 나뉘어 진다. </p></li>
<li><p>Native layer는 각 플랫폼 별 Webview를 포함하여 사용한다. </p></li>
<li><p>Native layer는 각 플랫폼 별 사용되는 언어로 개발되어 있으며 JavaScript layer에서 요청된 DeviceAPI 를 플랫폼 SDK를 이용하여 처리된다.  </p></li>
</ul>

<p><br> </p>

<h3>1.1.1 Runtime JavaScript layer</h3>

<ul>
<li><p>Java Script layer는 웹앱에서 사용하기 위한 JavaScript API들을 선언 및 정의 하며 이를 Runtime의 native layer와 연결하는 역할을 한다.</p></li>
<li><p><strong>SRT-x.x.js</strong> 형태로 배포 되며 Runtime이 업데이트 될때마다 버전명이 올라간다. 
    &gt; <strong>2012.10.08</strong> 기준 <strong>SRT-1.0.js</strong> 배포 </p></li>
<li><p><strong>SRT-x.x.js</strong> 는 크게 두가지 역할로 구분된다. </p>

<ul>
<li>   DeviceAPIs : 웹앱에서 사용하는 JavaScript API ProtoType 정의 </li>
<li>   exec module: JavaScript APIs 를 Native Runtime Library와 연결하여 통신하는 공통 인터페이스 모듈 

<ul>
<li>   js prompt()함수를 native 단에서 재정의 하여 JavaScript와 native의 연결 통로가 된다. </li>
</ul></li>
</ul></li>
</ul>

<p><br></p>

<hr>

<h2>1.2 Android Runtime 기본 구조</h2>

<p><br></p>

<h3>1.2.1 Android Native Layer</h3>

<ul>
<li><p>Android Webview를 이용하여 Runtime JavaScript Library에서 호출된 API를 그에 해당하는 Native Class를 실행하고 성공/실패 콜백 전달하는 모듈</p></li>
<li><p>WebApp에서 Device의 특정 기능을 수행 및 webview를 사용하기 위하여 <strong>Runtime.jar</strong> 가 배포된다. </p>

<ul>
<li>   Runtime.jar는 Java class로 구성되어 있는 Android용 native library 이다. </li>
<li>    Runtime.jar는 web app의 index.html을 load하는 파일을 포함 하고 있다. </li>
<li>    Runtime.jar는 Cornerstone Runtime에서 제공하는 DeviceAPI가 포팅되어 있다. </li>
<li>    Runtime.jar는 Native code로 모듈화 되어 Android SDK 로 부터 작업을 수행하고 결과를 JavaScript layer에 반환 한다. </li>
</ul></li>
</ul>

<p><br></p>

<h3>1.2.2 Android Project Files</h3>

<ul>
<li><p>Android용 webapp을 개발하기 위해서는 아래 와 같은 project file 들을 세팅하여야 한다. </p>

<p>1) AndroidManifest.xml</p>

<ul>
<li>   WebApp의 고유한 <strong>package</strong> 명 설정 </li>
</ul>

<p>2) res/value/string.xml </p>

<ul>
<li>    실제 단말에서 보여지는 <strong>WebApp의 이름</strong> 설정 </li>
</ul>

<p>3)  res/drawable/icon.png</p>

<ul>
<li>    실제 단말에서 보여지는 <strong>아이콘</strong> 설정 </li>
</ul></li>
</ul>

<p><br></p>

<hr>

<h2>1.3 IOS Runtime 기본 구조</h2>

<h3>1.3.1 IOS Native Layer</h3>

<p><img src="./images/ios-Runtime-structure.png" alt=""></p>

<ul>
<li><p>UIWebview를 이용하여 Runtime JS Library에서 불리는 API를 그에 해당하는 Native Class를 실행하고 성공/실패 콜백 전달 모듈</p>

<ul>
<li>RuntimeDelegate : UIWebview를 생성하고 Runtime API를 연동</li>
<li>ViewController : UIWebview와 Device를 연결하고 Orientaion을 제어</li>
<li>Commands : JS API 를 Native Platform API를 통해서 구현</li>
<li>Utils : JSON / Base64 / ExtendMutableArray / ExtendMutableDictionary 라이브러리</li>
</ul></li>
<li><p>SRT.framework 라는 이름으로 배포된다.</p></li>
</ul>

<p><br></p>

<h3>1.3.2 IOS Project Files</h3>

<ul>
<li><p>iOS용 webapp을 개발하기 위해서는 아래 와 같은 project file 들을 세팅하여야 한다. </p>

<p>1) SRT_Template-Info.plist</p>

<ul>
<li><strong>iOS 어플 설정</strong>을 위한 프로젝트 파일</li>
</ul>

<p>2) SRT.plist</p>

<ul>
<li>   <strong>Cornerstone Runtime 설정</strong>을 위한 프로젝트 파일</li>
</ul>

<p>3) Resources</p>

<ul>
<li>   icon / splash screen 용 이미지 파일들</li>
</ul></li>
</ul>

<p><br></p>

<hr>

<h1>2. Cornerstone Runtime 웹앱 개발</h1>

<hr>

<h2>2.1 Android Runtime 웹앱 개발 환경</h2>

<ul>
<li>Authoring Tool을 이용하여 Android 용 웹앱 개발환경을 다운로드 받을 수 있다. </li>
<li><a href="http://">여기에 링크가 들어간다.</a> </li>
</ul>

<h3>2.1.1 Android Runtime 웹앱 개발 환경 구조</h3>

<p><img src="./images/devel.png" alt="Android Runtime 웹앱 개발 환경 구조"></p>

<p>1) src - plugin 개발시에 작성하는 Java Native Code</p>

<p>2) asset - 실제 웹앱의 웹 리소스(HTML/CSS/JS/IMG) 와 Runtime JavaScript Library 가 저장되는 위치 </p>

<ul>
<li>   <strong>assets/www</strong> : 웹앱의 저장 위치 </li>
<li>   <strong>assets/www/index.html</strong> : 웹앱의 첫 실행 파일 </li>
</ul>

<p>3) libs - Webview 를 이용하여 Device 의 단말 접근 기능을 제공하는 DeviceAPI가 포팅된 Android library 위치 </p>

<ul>
<li>   <strong>Runtime.jar</strong> : webview 및 DeviceAPI가 포팅된 JAVA library</li>
</ul>

<p>4) drawable - device에 보여지는 icon 및 splash image를 저장하는 위치 </p>

<ul>
<li>   <strong>icon.png</strong> : device에 보여지는 icon</li>
<li>   <strong>splash.png</strong> : 웹앱 실행 초기에 보여지는 splash image (optional) </li>
</ul>

<p>5) values , xml - 웹앱의 name 및 runtime setting을 할 수 있는 폴더 </p>

<ul>
<li>   <strong>value/string.xml</strong> : 웹앱의 name을 세팅하는 파일 </li>
<li>   <strong>xml/config.xml</strong> : device의 orientation(portrait , landscape , audo) 및 splash image를 세팅 하는 파일 </li>
</ul>

<p>6) AndroidManifest.xml : 하나의 Native Application으로써의 고유한 Package 명을 지정하는 파일, 하드웨어 가속 GPU 렌더링 사용여부를 지정하는 파일.</p>

<p><br></p>

<h3>2.1.2 Android 웹앱 개발 절차</h3>

<p><strong>step 1.</strong>  Authoring tool을 이용해 Android Web App Template를 받으면 Lib 폴더에 <strong>Runtime.jar가 기본으로 포함</strong>되어 있다.</p>

<p><img src="./images/src.png" alt=""></p>

<p><strong>step 2.</strong>  웹앱 개발자는 assets 폴더 내부에 .html , .js , .css 와 같은 웹앱 소스 파일을 작성하여야 하며 시작 파일은 반드시 index.html 이어야 한다. <strong>SRT-1.0.js는 웹앱 개발 환경 template의 기본 포함된 파일</strong>이다. </p>

<p><img src="./images/src2.png" alt=""></p>

<ul>
<li><p>초기 페이지인 <strong>index.html</strong>을 생성한다. </p>

<pre><code>&lt;html&gt;
&lt;head&gt;
&lt;script language=&quot;javascript&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    Hello Runtime.
&lt;/body&gt;
&lt;/html&gt;
</code></pre></li>
<li><p>특정 웹페이지 내부에서 Runtime DeviceAPI를 사용하고 할 때에는 아래와 같이 JavaScript Library를 선언한다.</p>

<pre><code>&lt;script type=&quot;text/javascript&quot; charset=&quot;utf-8&quot; src=*../path/SRT-1.0.js&quot;&gt;&lt;/script&gt;
</code></pre>

<blockquote>
<p>웹앱에서의 단말의 해상도에 상관 없이 스크린에 fix되게 출력하는 방법</p>
</blockquote>

<ul>
<li>모바일 웹에서는 Device에 따라 환경적인 차이가 많아서 고려해야 할 사항들이 몇 가지 있다. Web Page를 Device 해상도 별로 제작 할 수 있는 것도 아니고 어떤 Device가 접속했는지를 일일이 구분하여 서버상에서 Page를 내려줄 수 있는 것도 아니다. 이런 크로스브라우징 문제를 해결하기 위해서 Media query를 사용하기를 권장한다. </li>
<li><p>해상도가 다른 단말에 따라 화면에 fix하게 출력 하고 싶을 경우 아래와 같이 <strong>Media Query</strong>를 이용하여 device 해상도에 맞는 css를 적용하도록 한다. </p>

<blockquote>
<p>Style.css example</p>
</blockquote>

<pre><code>body {background-color:#000;}
/* Galaxy Note 1 */ 
@media screen and (max-width:801px) { #wrapper img{width:800px; height:1204px;}}

/* Ipad2 */ 
@media screen and (max-width:769px) { #wrapper img{width:769px; height:1204px;}}

/* Galaxy S3 */
@media screen and (max-width:721px) { #wrapper img{width:720px; height:1204px;}}

/* Galaxy S2 */
@media screen and (max-width:481px) { #wrapper img{width:480px; height:724px;}}
</code></pre>

<blockquote>
<p>Index.html example</p>
</blockquote>

<pre><code>&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;
&lt;meta name = &quot;viewport&quot; content = &quot;user-scalable=no, width=device-width, target-densitydpi=device-dpi&quot;/&gt;

&lt;title&gt;Media query test&lt;/title&gt;
&lt;link href=&quot;style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
 &lt;div id=&quot;wrapper&quot;&gt;
    &lt;img src=&quot;img/bg.jpg&quot; /&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></li>
</ul></li>
</ul>

<p><strong>step 3.</strong>  Res 폴더 내부에 웹앱 개발자가 사용하고자 하는 아이콘 이미지를 <strong>icon.png</strong>의 이름으로 삽입한다. </p>

<p><img src="./images/icon.png" alt=""></p>

<p><strong>step 4.</strong> <strong>AndroidManifest.xml</strong> 파일 내부의 package 명을 개발자가 변경을 해줘야 한다. 이는 고유한 값으로 Android 시스템 내부의 중복된 어플이 설치되지 않도록 한다. </p>

<p><img src="./images/manifest.png" alt=""></p>

<ul>
<li><p>기본적인 Manifest 파일의 형식 </p>

<pre><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:windowSoftInputMode=&quot;adjustPan&quot;
package=&quot;co.kr.skt.testapp.test&quot; android:versionName=&quot;1.1&quot; android:versionCode=&quot;5&quot;&gt;
</code></pre></li>
<li><p>GPU 하드웨어 가속 렌더링을 사용하고 싶다면 아래와 같이 application tag에 hardwareAccelerated 를 true로 설정 한다. 이는 웹 앱이 디바이스에서 사용하는 메모리 점유율을 늘어나지만 부드러운 2D image 렌더링을 가능하게 한다. (default는 생략됨) </p>

<pre><code>&lt;application android:icon=&quot;@drawable/icon&quot; android:label=&quot;@string/app_name&quot; android:hardwareAccelerated=&quot;true&quot; android:debuggable=&quot;true&quot;&gt;    
</code></pre></li>
</ul>

<p><strong>step 5.</strong> Application의 실제 단말기에서 보여지는 이름을 <strong>string.xml의 app_name</strong>에 정의한다.</p>

<p><img src="./images/string.png" alt=""></p>

<ul>
<li><p>string.xml</p>

<pre><code>&lt;resources&gt;
  &lt;string name=&quot;app_name&quot;&gt;테스트웹앱&lt;/string&gt; 
&lt;/resources&gt;
</code></pre></li>
</ul>

<p><strong>step 6.</strong> <strong>res/xml/config.xml</strong> 의 orientation , splashscreen , screen mode preference를 이용하여 웹앱의 방향(가로/세로)과 splash image(html 이 로딩 되기 전에 보여지는 image)와 마지막으로 Screen Mode(네비게이터 바, 타이틀바 사용여부)를 세팅 할 수 있다. 이는 선택 사항으로 웹앱 개발자가 작성하지 않으면 default 값을 따르게 된다. </p>

<p><img src="./images/config.png" alt=""></p>

<pre><code>1) 웹앱의 방향(default 는 auto)

    - 가로 방향
    &lt;preference name=&quot;orientation&quot; value=&quot;landscape&quot;/&gt;

    - 세로 방향
    &lt;preference name=&quot;orientation&quot; value=&quot;portrait&quot;/&gt;

    - 자동     
    &lt;preference name=&quot;orientation&quot; value=&quot;auto&quot;/&gt;

2) splash image(default 는 splash image를 사용하 않음) 

    - value값인 splashskt.png가 res/drawable 폴더 내부에 존재 하여야 한다.
    &gt; image area
    &lt;preference name=&quot;splashscreen&quot; value=&quot;splashskt&quot;/&gt;

3) screen Mode(default는 네비게이터 바와 타이틀 바가 모두 보임)

    - 네비게이터 바와 타이틀 바가 모두 보임 
    &lt;preference name=&quot;screenmode&quot; value=&quot;default&quot;/&gt;

    - 네비게이터 바만 보임 , 타이틀 바는 안보임
     &lt;preference name=&quot;screenmode&quot; value=&quot;maximized&quot;/&gt;

    - 네비게이터 바와 타이틀 바가 모두 안보임
    &lt;preference name=&quot;screenmode&quot; value=&quot;fullscreen&quot;/&gt;
</code></pre>

<p><strong>step 7.</strong> Eclipse의 빌드 아이콘을 이용하여 Android App을 빌드하여 Device에 정상적으로 설치됨을 확인한다. </p>

<p><img src="./images/webapp.png" alt=""></p>

<p><strong>step 8.</strong> Device에 WebApplication이 정상적으로 출력됨을 확인한다. </p>

<p><img src="./images/webmain.png" alt=""></p>

<hr>

<h2>2.2 iOS Runtime 웹앱 개발 환경</h2>

<ul>
<li>Authoring Tool을 이용하여 iOS 용 웹앱 개발환경을 다운로드 받을 수 있다. </li>
<li><a href="http://">여기에 링크가 들어간다.</a> </li>
<li>iOS용 웹앱 개발환경은 Xcode 버전 4.3, Mac OSX 버전 10.7.4 Lion 기준으로 개발되었으며 iOS 버전은 5.0 이다.</li>
</ul>

<h3>2.2.1 iOS Runtime 웹앱 개발 환경 구조</h3>

<p><img src="./images/srt_project.png" alt=""></p>

<p>1) SRT.framework - Cornerstone Runtime Library</p>

<p>2) www - 실제 웹앱의 웹 리소스(HTML/CSS/JS/IMG) 와 Cornerstone Runtime JavaScript Library 가 저장되는 위치 </p>

<ul>
<li>   <strong>www</strong> : 웹앱의 저장 위치 </li>
<li>   <strong>www/index.html</strong> : 웹앱의 첫 실행 파일</li>
<li>   <strong>www/SRT-1.0.js</strong> : Cornerstone Runtime JavaScript Library</li>
</ul>

<p>3) SRT_Template/Resources - 어플에 필요한 리소스를 저장하는 위치</p>

<ul>
<li>   <strong>icons</strong> : Icon을 위한 이미지 폴더</li>
<li>   <strong>splash</strong> : splash screen을 위한 이미지 폴더</li>
</ul>

<p>4) SRT_Template/Supporting Files - 앱 및 런타임 설정 파일이 위치하는 폴더</p>

<ul>
<li>   <strong>SRT_Template-Info.plist</strong> : iOS 앱을 위한 설정 파일</li>
<li>   <strong>SRT.plist</strong> : Cornerstone Runtime을 위한 설정 파일</li>
</ul>

<p><br></p>

<h3>2.2.2 iOS 웹앱 개발 방법</h3>

<p><strong>step 1.</strong>  Authoring tool을 이용해 iOS Web App Template를 받아서 Xcode로 프로젝트(파일명 : SRT_Template.xcodeproj)를 연다. </p>

<p><img src="./images/openproject.jpg" alt=""></p>

<p><strong>step 2.</strong>  Web App 개발자는 www 폴더 내부에 .html , .js , .css 와 같은 webapp을 작성하여야 하며 시작 파일은 반드시 index.html 이어야 한다. <strong>SRT-1.0.js는 template 기본 파일</strong>이다. </p>

<p><img src="./images/index.jpg" alt=""></p>

<ul>
<li><p>특정 웹페이지 내부에서 Runtime에서 제공하는 DeviceAPI를 사용하고 할 때에는 아래와 같이 JavaScript Library를 선언한다.</p>

<p><code>&lt;script type=&quot;text/javascript&quot; charset=&quot;utf-8&quot; src=&quot;SRT-0.1.js&quot;&gt;&lt;/script&gt;</code></p></li>
</ul>

<p><strong>step 3.</strong>  Resources/icons 폴더 내부에 웹앱 개발자가 사용하고자 하는 아이콘 이미지를 프로젝트에 추가한다. 기본으로 설정된 icon 파일 이름은 <strong>icon</strong>이며 기본 설정일 경우 단말에 따라 적용되는 icon 파일 이름은 아래와 같다. icon 파일 이름 설정 방법은 step 5. 에서 다룬다.</p>

<ul>
<li><strong>icon.png</strong> : Iphone 3GS 이전 모델 용 아이콘 이미지</li>
<li><strong><a href="mailto:icon@2x.png">icon@2x.png</a></strong> : iphone 4/4s 용 아이콘 이미지</li>
<li><strong>icon-72.png</strong> : ipad / ipad2 용 아이콘 이미지</li>
<li><strong><a href="mailto:icon-72@2x.png">icon-72@2x.png</a></strong> : new ipad 용 아이콘 이미지</li>
</ul>

<p><img src="./images/srt_resources.jpg" alt=""></p>

<p><strong>step 4.</strong> Resources/splash 폴더 내부에 웹앱 개발자가 사용하고자 하는 스플래쉬 이미지를 추가한다.  기본으로 설정된 splash 파일 이름은 <strong>Splash</strong>이며 기본 설정일 경우 단말에 따라 적용되는 splash 파일 이름은 아래와 같다. splash 파일 이름 설정 방법은 step 6.에서 다룬다 </p>

<p>참고로 스플래쉬 이미지란 웹앱 실행시 웹앱이 로딩될때까지 보여지는 이미지 화면을 뜻한다.</p>

<ul>
<li><strong>Splash.png</strong> : Iphone 3GS 이전 모델용 스플래쉬 이미지</li>
<li><strong>Splash @2x.png</strong> : iphone 4/4s 용 스플래쉬 이미지</li>
<li><strong>Splash-Landscape.png</strong> : ipad / ipad2 용 가로 스플래쉬 이미지</li>
<li><strong>Splash-Portrait.png</strong> : ipad / ipad2 용 세로 스플래쉬 이미지</li>
<li><strong><a href="mailto:Splash-Landscape@2x.png">Splash-Landscape@2x.png</a></strong> : new ipad 용 가로 스플래쉬 이미지</li>
<li><strong><a href="mailto:Splash-Portrait@2x.png">Splash-Portrait@2x.png</a></strong> : new ipad 용 세로 스플래쉬 이미지</li>
</ul>

<p><strong>step 5.</strong> Supporting Files/SRT_Template-Info.plist 파일을 수정하여 어플의 여러 속성 설정이 가능하다. 이는 Cornerstone Runtime 프로젝트 뿐만이 아니라 iOS 어플 공통 적용사항이다. 아래는 주요 설정 값들이다.</p>

<p><img src="./images/SRTTemplate_info.jpg" alt=""></p>

<ul>
<li><strong>Bundle display name</strong> : 어플명</li>
<li><strong>Icon files / Icon files(iOS5)</strong> : 아이콘 이미지 파일 이름명</li>
<li><strong>Bundle identifier</strong> : 어플 고유 ID. 실제 단말 연동을 위해서는 애플사에 개발자 인증(provisioning profile)을 받아야하며 그때 설정한 ID를 넣는다.</li>
<li><strong>Supported interface orientations / Supported interface orientations(ipad)</strong> : 해당 어플이 지원하는 화면 회전 허용값. 예를 들어 Portrait(bottom home button)만이 설정되어 있다면 iPAD에서 회전을 하여도 실제로 화면이 회전되지 않는다.</li>
</ul>

<p><strong>step 6.</strong> Supporting Files/SRT.plist 파일을 수정하여 Cornerstone Runtime의 여러 속성 설정이 가능하다. </p>

<p><img src="./images/SRT.jpg" alt=""></p>

<ul>
<li><strong>UIWebViewBounce</strong> : 화면 드래그를 끝까지 했을 경우 웹뷰가 바운스 효과를 내는지 여부를 설정함.</li>
<li><strong>EnableLocation</strong> : 해당 어플이 Geolocation 을 설정할수 있는지 여부를 설정</li>
<li><strong>EnableViewportscale</strong> : 뷰포트 확대/축소 허용 여부를 설정</li>
<li><strong>AutoHideSplashScreem</strong> : Yes일 경우 DeviceReady가 되면 자동으로 스플래쉬 스크린이 해제된다. No일 경우 API를 통해서 원하는 시점에 해제가 가능하다</li>
<li><strong>SplashImage</strong> : 스플래쉬 스크린을 위한 이미지 파일명 설정. 기본은 &ldquo;Splash&quot;로 설정되어 있다.</li>
<li><strong>Plugins</strong> : Cornerstone Runtime JS 라이브러리와 Native Class간의 연동을 위한 Map이다.
Key의 경우 JS 라이브러리를 위한 모듈명이며 Value의 경우 NativeClass 모듈명이다.
3rd 파티 개발자가 추가 플러그인을 개발할 경우에 사용한다.</li>
<li><strong>InstalledApplications</strong> : AppLauncher 모듈의 getInstalledApplications API 사용시 검색 가능한 어플리스트. 개발자가 어플리스트를 설정하면 getInstalledApplications API를 통해 어플 리스트중 실제 단말에 설치된 어플의 리스트를 가져올 수 있다. 어플리스트는 불려지는 어플에 설정된 URL Schemes에 설정된 값으로 리스트를 설정한다. 기본 설정은 기본 탑재 어플인 music, sms, mailto, videos 4가지가 설정되어 있다. </li>
</ul>

<p><strong>step 7.</strong> Run을 눌러서 실제 단말에서 웹앱이 정상적으로 실행되는지 확인한다. </p>

<p><img src="./images/run.png" alt=""></p>

<hr>

<h1>3. Cornerstone Runtime Android와 iOS 공통 개발시 주의할 점</h1>

<hr>

<h2>3.1 Android 와 iOS 차이점</h2>

<ul>
<li>안드로이드와 iOS는 개발사, 언어, 구조가 전혀 다른 플랫폼이며 따라서 웹앱 개발시에 상황에 따라 이를 구분해야 하는 경우가 있다.</li>
</ul>

<h3>3.1.1 Android/iOS 분기 방법</h3>

<p>1) <strong>device.platform</strong> : Runtime이 로딩되면 해당 변수에 Android 인지 iOS인지가 스트링으로 기록된다.
이를 이용하여 간단히 분기 할 수 있다.</p>

<blockquote>
<p>example code </p>
</blockquote>

<pre><code>    if(device.platform == &quot;Android&quot;){
    // android 처리
    ...
    } else {
    // iOS 처리
    ...        
    }
</code></pre>

<p>2) DeviceStatus 모듈의 <strong>aspect:Device,property:platform</strong>를 이용하면 플랫폼을 알수 있다.</p>

<blockquote>
<p>example code</p>
</blockquote>

<pre><code>    var g_platform = null;

    function validSuccessCalback_DS(prop,value) {
        console.log(&quot;The aspect::&quot; + prop.aspect + &quot;  property::&quot; + prop.property + &quot; is &quot; + value);
        g_platform = value
    }

    navigator.devicestatus.getPropertyValue(validSuccessCalback_DS ,validErrorCallback_DS ,{aspect:&quot;Device&quot;, property:&quot;platform&quot;});
</code></pre>

<p>3) 위의 device.platform를 포함한 모든 Runtime의 함수/변수는 최초 1회 <strong>deviceready</strong> 이벤트가 불린 뒤부터 사용가능하다. </p>

<blockquote>
<p>example code</p>
</blockquote>

<pre><code>    var g_platform = null;
    var onSuccess = function(e) {
        g_platform = device.platform
    }

    document.addEventListener(&quot;deviceready&quot;, onSuccess, true);
</code></pre>

<h3>3.1.2 iOS 웹앱 개발시 어플 종료 문제</h3>

<p>1) 안드로이드와는 다르게 iOS 어플들은 애플사의 정책에 따라 어플 종료 개념이 없으며 홈버튼이 이를 대체한다.  </p>

<ul>
<li>관련 링크 : <a href="https://developer.apple.com/library/ios/#qa/qa2008/qa1561.html">(애플사는 공식적으로 어플 종료 API를 제공하지 않는다)</a></li>
</ul>

<p>2) 따라서 하나의 소스로 안드로이드와 iOS를 둘다 지원하는 Cornerstone Runtime의 특성상 안드로이드 웹앱에 종료버튼이 있으면 iOS는 이를 지원하지 않아 문제가 될 수 있다.</p>

<p>3) 해결방법</p>

<ul>
<li>웹앱이 android/ios에 따라 분기를 타서 iOS는 종료버튼을 생성하지 않도록 개발한다.

<ul>
<li>플랫폼에 따른 분기를 타는 방법은 위의 3.1.1에 설명되어 있다.</li>
</ul></li>
</ul>

<p><br></p>

<ul>
<li><p>plugin을 통해 어플 종료 기능을 추가한다.</p>

<ul>
<li>plugin을 통한 Runtime 기능 추가는 forPlugin.md 문서에 자세히 설명되어 있다.
 종료기능은 네이티브 부분에 &#39;exit(0);&#39; 한줄만 호출하면 기능 구현 가능하나 이는 애플사가 권장하는 방식이 아님 을 밝혀둔다.<br></li>
<li>   관련 링크 : <a href="./forPlugin.html">CornerStone Runtime일을 이용한 Plugin 확장구조 개발</a></li>
</ul></li>
</ul>

<p><br></p>

<hr>

<h1>4. Cornerstone Runtime Sample Code</h1>

<hr>

<h2>4.1 Cornerstone Runtime을 이용한 Runtime Javascript API sample code</h2>

<ul>
<li><p>아래 링크를 통해 Runtime에서 제공하는 JavaScript API 목록을 확인 할 수 있다.  </p>

<p><a href="./sample/spechtmls.zip" title="Runtime DeviceAPI Spec Table">./sample/spechtmls.zip</a></p></li>
<li><p>아래 링크를 통해 Runtime에서 제공하는 JavaScript API 예제를 확인 할 수 있다. </p>

<p><a href="./sample/sample.zip" title="Runtime DeviceAPI Sample">./sample/sample.zip</a></p>

<blockquote>
<p>example 1. JavaScript Library가 정상적으로 load 되었는지 확인하는 sample (event_sample.html)</p>
</blockquote>

<pre><code>function onDeviceReady(){
    console.log(&quot;deviceready&quot;);
    //use some deviceAPIs
}

document.addEventListener(&quot;deviceready&quot;, onDeviceReady, false);
</code></pre>

<blockquote>
<p>example 2. 현재 wifi가 연결되었는지를 판단하는 sample (deviceStatus_sample.html) </p>
</blockquote>

<pre><code>function validSuccessCalback_DS(prop,value) {
alert(&quot;The aspect::&quot; + prop.aspect + &quot;  property::&quot; + prop.property + &quot; is &quot; + value);
if(value == &quot;undefined&quot;)
    alert(&quot;현재 wifi로 연결 되어 있지 않음&quot;);
}

function validErrorCallback_DS(response){
alert(&quot;다음 error: &quot; +  response.message + &quot;, 발생&quot;);
}

navigator.devicestatus.getPropertyValue(validSuccessCalback_DS ,validErrorCallback_DS ,{aspect:&quot;WiFiNetwork&quot;, property:&quot;ssid&quot;});
</code></pre>

<blockquote>
<p>example 3. camera app을 연동하여 사진을 찍는 sample (captureapi_sample.html)</p>
</blockquote>

<pre><code>function captureSuccess(filename) {
    console.log(&quot;Captured Image path:&quot; + filename);
    var imgDest = document.getElementById(&quot;captureimg&quot;);
    imgDest.setAttribute(&quot;src&quot;, filename + &quot;?&quot; + new Date().getTime());
}

function captureError(err) {
    console.log(err.message);
}

// start Image capture
navigator.capture.captureImage(captureSuccess, captureError, 
    {destinationFilename : &quot;file://sdcard/skruntimetest/test.png&quot;});
</code></pre>

<blockquote>
<p>example 4. battery 충전 유무가 변경 되었을 때 이를 웹앱에 공지하는 sample (battery_sample.html)</p>
</blockquote>

<pre><code>function onBatteryStatus() {
alert(&quot;navigator.battery.charging = &quot; + navigator.battery.charging);
alert(&quot;navigator.battery.level = &quot; + navigator.battery.level);
}

navigator.battery.addEventListener(&quot;chargingchange&quot;, onBatteryStatus,false);
</code></pre>

<blockquote>
<p>example 5. native calendar에 특정 event를 add 하는 sample (calendar_sample.html)</p>
</blockquote>

<pre><code>function eventAddedCB(event) {
    alert(&quot;CalendarEvent Added with description = &quot; + event.description
    + &quot;\nid = &quot; + event.id + &quot;\nstart = &quot; + event.start);
}

var calEvent = navigator.calendar.createEvent({
    description : &#39;HTML5 Introduction&#39;,
    summary : &#39;HTML5 test &#39;,
    start : &#39;2012-07-19 09:00&#39;,
    end : &#39;2012-07-19 12:00&#39;,
    recurrence : {
        expires : &#39;2012-08-28&#39;,
        frequency : &#39;weekly&#39;,
        interval : 1,
    },
    reminder : &#39;-3600000&#39;,
    status : &#39;tentative&#39;,
    location : &#39;SK bundang&#39;
});

navigator.calendar.addEvent(eventAddedCB, errorCallback, calEvent);
</code></pre>

<blockquote>
<p>example 6. Device sdcard에 저장되어 있는 Audio 파일을 재생하는 sample (media_sample.html)</p>
</blockquote>

<pre><code>function createmediasc (media) {
    gMedia2.play();
}

function error (err) {
    // do something with resulting error
    alert(err.message);
}

navigator.mediamanager.createAudio(createmediasc,error,&quot;file:///sdcard/Music/test2.mp3&quot;);
</code></pre>

<blockquote>
<p>example 7. Email를 송신 하는 sample (messaging_sample.html) </p>
</blockquote>

<pre><code>var msg = navigator.messaging.createMessage(Messaging.TYPE_EMAIL);

msg.to = [ &quot;test@naver.com&quot;, &quot;test2@yahho.co.kr&quot; ];
msg.cc = [ &quot;test1@naver.com&quot;, &quot;www1@yahho.co.kr&quot; ];
msg.bcc = [ &quot;etetet@naver.com&quot;, &quot;hfhfh@yahho.co.kr&quot; ];
msg.body = &quot;test body&quot;;
msg.subject = &quot;test subject&quot;;

var imagefile = new FileEntry(&quot;aa.png&quot;,&quot;file:///sdcard/skruntime/aa.png&quot;);
var imagefile2 = new FileEntry(&quot;bbbb.jpg&quot;,&quot;file:///sdcard/skruntime/bbbb.jpg&quot;);

msg.attachments = [imagefile,imagefile2];

try {
    navigator.messaging.sendMessage(function sc() {alert(&quot;SendMail OK&quot;);}, 
        function ec(err) {alert(err.message)}, msg);
} catch (e) {
    alert(e.message);
}
</code></pre>

<blockquote>
<p>example 8. 현재 가속도 정보가 변화 될때 마다 웹앱에 통지 하는 sample</p>
</blockquote>

<pre><code>function acceleration_handler(event) {
    console.log(&quot;accelerationIncludingGravity.x = &quot; + event.accelerationIncludingGravity.x +
    &quot;\n accelerationIncludingGravity.y = &quot; + event.accelerationIncludingGravity.y +
    &quot;\n accelerationIncludingGravity.z = &quot; + event.accelerationIncludingGravity.z);
}
window.addEventListener(&quot;devicemotion&quot;,acceleration_handler , true);
</code></pre>

<blockquote>
<p>example 9. Device의 pause , resume 상태를 웹앱에 통지 하는 sample (event_sample.html) </p>
</blockquote>

<pre><code>function onPause(){
    console.log(&quot;onPause&quot;);
}

function onResume(){
    console.log(&quot;onResume&quot;);
}

document.addEventListener(&quot;pause&quot;, onPause, false);
document.addEventListener(&quot;resume&quot;, onResume, false);
</code></pre>

<blockquote>
<p>example 10. Device의 진동을 실행하는 sample (vibrator_sample.html)</p>
</blockquote>

<pre><code>function vibratetime(){
    //2 second
    navigator.vibrate(2000);
}
function vibratepattern(){
    //use pattern
    navigator.vibrate([500,30,1000]);
}
</code></pre>

<blockquote>
<p>example 11. 웹앱을 종료하는 sample (deviceInteraction_sample.html) </p>
</blockquote>

<pre><code> navigator.deviceinteraction.exitApp(); 
</code></pre></li>
</ul>

</div>

    </article>
<script  src="/socket.io/socket.io.js"></script><script >var socket = io.connect('/docpad-live-reload');
socket.on('regenerated',function(){
	document.location.reload();
});</script><script defer="defer"  src="./script.js"></script>  </body>
</html>
