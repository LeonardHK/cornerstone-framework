<!--
{
    "id": 4316,
    "title": "자동완성(Typeahead)",
    "outline": "텍스트 입력상자에 typeahead (자동완성) 를 손쉽게 만들기 위한 플러그인이다.",
    "tags": ["widget", "plugin"],
    "order": [4, 3, 16],
    "thumbnail": "4.3.16.typeahead.png"
}
-->

# 자동완성(Typeahead)

텍스트 입력상자에 typeahead (자동완성) 를 손쉽게 만들기 위한 플러그인이다.

## 설치하기

패키지 매니저를 이용해 필요한 라이브러리를 모두 다운로드 받고 사용자가 사용하는 방식에 따라 필요한 라이브러리를 사용하면 된다.

```
jam install widget-typeahead
```

### 의존성

종류 | 버전 | Plugin | Backbone View
:-- | :-- | :--: | :--: | :--:
underscore | 1.4.4 | X | O
backbone | 1.0.0 | X | O
jquery | 1.10.2 | O | O
typeahead | 0.9.3 | O | O

> AMD 방식으로 개발하는 경우 `"widget-typeahead"`만 define에 선언하면 의존성이 걸린 라이브러리를 자동적으로 가져온다.

## 사용법

종류 | 사용방법 | 설명
:-- | :-- | :--
Plugin | `$("#example").typeahead()` | 위젯을 jQuery Plugin 방식으로 적용
Backbone View | 추후 설명 | 위젯을 Backbone View 방식으로 적용

## Datasets

`Datasets(데이터 집합)`는 typeahead가 자동완성 제안하기 위한 데이터 집합체이다. 상기 예제와 같이 `single object`로 정의하거나 데이터 집합체가 여러개일 경우 `array` 타입으로 지정할 수도 있다.

```
$("#typeahead-ex1").typeahead({
    "name": "trends",
    "prefetch": "https://twitter.com/trends.json"
});

$("#typeahead-ex2").typeahead([
    {
        name: 'accounts',
        prefetch: 'https://twitter.com/network.json',
        remote: 'https://twitter.com/accounts?q=%QUERY'
    },
    {
        name: 'trends',
        prefetch: 'https://twitter.com/trends.json'
    }
]);
```

## Datum

datasets(데이터 집합)을 구성하는 개별적인 요소들을 datum이라 부른다. datum의 구조는 `value` 속성과 `tokens` 속성으로 이루어진 object 형식으로 갖춰진다.
`value`는 datum의 값을 표현하는 문자열이며, `tokens`는 주어진 쿼리와 datum을 매칭시켜주는 <strong>한 단어<strong> 문자열의 모음이다.

```
{
    value: '@JakeHarding',
    tokens: ['Jake', 'Harding']
}
```

사용의 용이성을 위해, datum은 문자열로 표시 할 수 있다. datum 객체 내에 있는 문자열은 암시적으로 datum 객체로 변환된다.

datum이 제안 내용으로 렌더링하는 경우, datum 객체는 컨텍스트를 템플릿 엔진으로 전달한다. 이는 datume 객체에 임의의 속성을 포함하는 경우, 해당 속성을 제안 내용에 렌더링하는 데 템플릿을 사용할 수 의미한다.

```
{
    value: '@JakeHarding',
    tokens: ['Jake', 'Harding'],
    name: 'Jake Harding',
    profileImageUrl: 'https://twitter.com/JakeHaridng/profile_img'
}
```

```
<img src="{{profileImageUrl}}">
<p><strong>{{name}}</strong>&nbsp;{{value}}</p>
```

## dataset 옵션

```
$("#typeahead-ex1").typeahead({
    "name": "trends",
    "prefetch": "https://twitter.com/trends.json"
});
```

옵션명 | 타입 | 기본값 | 설명
:-- | :-- | :-- | :--
name | string | | dataset의 식별자. typeahead의 지능적 캐슁을 위해 사용된다. 값이 지정되지 않을 경우 유니크한 ID값을 생성한다.
valueKey | string | "value" | 데이텀 대상에서 데이텀의 값에 액세스하는 데 사용되는 키값.
limit | number | 5 | 지정된 쿼리에 표시 할 데이터 집합의 제안의 최대 갯수.
template | string, precompiled template(function) | function |  제안을 렌더링하는 데 사용되는 템플릿. 제공되지 않을 경우 자동완성 제안값은 `<p>` 요소에 포함되여 렌더링 된다. `eg. ) <p>value<p>`
engine | object | | template을 compile 및 render할 엔진. template 옵션 값을 string으로 설정할 경우 반드시 선언해줘야 한다. Any engine can use used as long as it adheres to the expected API
header | string, DOM | | 드롭다운 메뉴에서 제안내용 위에 렌더링 될 요소. DOM 요소 또는 HTML이 될 수 있다.
footer | string, DOM | | 드롭다운 메뉴에서 제안내용 아래에 렌더링 될 요소. DOM 요소 또는 HTML이 될 수 있다.
local | array | null | datum의 배열. (제안내용을 검색할 원천 로컬 데이터들의 배열)
prefetch | URL, object | | datum 배열이 포함된 JSON 파일의 URL. 초기화 시 데이터를 프리패치 한다. 로드된 데이터는 브라우저가 로컬 스토리지를 지원하는 경우 추가 네트워크 요청을 방지하기 위해 캐쉬된다. object로 설정 할 경우 prefetch 색션을 참고한다.
remote | URL, object | | `local` 과 `prefetch`로 제안내용이 불충분 할 경우 remote를 통하여 추가적인 제안내용을 받아올 URL. object로 설정 할 경우 하기 remote 색션을 참고한다.

> Template Engine 호환성

> - Any template engine will work with typeahead.js as long as it adheres to the following API:

```
// engine has a compile function that returns a compiled template
var compiledTemplate = ENGINE.compile(template);
// compiled template has a render function that returns the rendered template
// render function expects the context to be first argument passed to it
var html = compiledTemplate.render(context);
```

### prefetch 옵션

```
$("#typeahead-ex1").typeahead({
    "prefetch": {
        "url": "https://twitter.com/network.json",
        "ttl": 86400000
    }
});
```

옵션명 | 타입 | 기본값 | 설명
:-- | :-- | :-- | :--
url  | URL | | (필수) datum 배열이 포함된 JSON 파일의 URL.
ttl | number | 86400000 (1일) | prefetch 데이터를 로컬 스토리지에 캐쉬할 시간(ms)
filter | function | | prefetch 요청 후 받은 응답 본문을 필터링 하는 함수를 정의할 수 있다. 해당 함수는 datum 배열을 반환해야 한다.


### remote 옵션

```
$("#typeahead-ex1").typeahead({
    "remote": {
        "url": "https://twitter.com/accounts?q=%QUERY",
        "ttl": 86400000
    }
});
```

옵션명 | 타입 | 기본값 | 설명
:-- | :-- | :-- | :--
url | URL | | (필수) `local` 과 `prefetch`로 제안내용이 불충분 할 경우 remote를 통하여 추가적인 제안내용을 받아올 URL.
dataType | string | "json" | remote 서버의 응답 타입


## 이벤트

종류 | 설명
:-- | :--
`show.cs.datepicker` | 달력이 보여질 때 발생한다.


## Snippet

### jQuery Plugin

#### HTML

```

```

#### JS

```

```

## Example
