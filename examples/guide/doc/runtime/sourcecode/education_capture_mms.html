<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport"
	context="width-divice-width, initial-scele-1.0, user-scalble=no">
<script type="text/javascript" charset="utf-8" src="../sktjs/SRT-0.1.js"></script>
<title>Capture API</title>
<script type="text/javascript">
	function CaptureImage() {
		
		function captureSuccess(filename) {
			
			console.log("Captured Image path:" + filename);
			
			var imgDest = document.getElementById("captureimg");
			imgDest.setAttribute("src", filename + "?" + new Date().getTime());
			
			var msg = navigator.messaging.createMessage(Messaging.TYPE_MMS);
			
			var imagefile1 = new FileEntry("testpicture.png","file://mnt/sdcard/testdirectory/testpicture.png");
			
			msg.to = ["01076666049"];
			msg.body = "test body is long.test body is long.test body is long.test body is long.test body is long.test body is long.test body is long.test body is long.";
			msg.attachments = [imagefile1];

			try {
				var reval = navigator.messaging.sendMessage(function sc() {}, function ec(err) {alert(err.message);}, msg);
			} catch (e) {
				alert(e);
			}	
		}

		function captureError(err) {
			alert(err.message);
		}

		navigator.capture.captureImage(captureSuccess, captureError, {destinationFilename : "file://mnt/sdcard/testdirectory/testpicture.png"});
	}
	
	function makeDir(){
		
		function onResolveSuccess(dirEntry) {
			console.log(dirEntry.name);
			console.log(dirEntry.fullPath);
			
			function success(entry) {
			    console.log("entry Name: " + entry.name);
			}

			function fail(error) {
			    alert("Unable to create new directory: " + error.code);
			}

			dirEntry.getDirectory("testdirectory", {create: true, exclusive: false}, success, fail);

		}

		function fail(error) {
			console.log(error.message);
		}

		window.resolveLocalFileSystemURI("file://mnt/sdcard",onResolveSuccess, fail);
	}

</script>
</head>
<hr>
Capture+MMS API Test
<BR>
<a href="file:///android_asset/www/index.html">back</a>
<hr>
<button onclick="CaptureImage();">CaptureImage</button>
<br>
<button onclick="makeDir();">makeDir</button>
<br>
<img id="captureimg" witdh="200px" height="200px"></img>
</body>
</html>
